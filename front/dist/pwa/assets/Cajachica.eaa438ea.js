import{T as d,U as m,V as o,W as e,X as n,aE as t,$ as u,M as h,_ as p,aF as v,aD as f,Y as j,Z as Q,aG as D}from"./index.8e5efdfb.js";import{Q as g,a as r,d as b}from"./format.7d90d4c2.js";import{Q as _}from"./QList.75259ae5.js";import{Q as k}from"./QBtnDropdown.5b46475c.js";import{Q as y}from"./QTd.47060a52.js";import{Q as w}from"./QTable.9ece2fc3.js";import{Q as x}from"./QSpace.1f3d3d67.js";import{Q as q}from"./QSelect.7f7f9668.js";import{Q as M}from"./QForm.4421addc.js";import{Q as U}from"./QPage.8f9149b4.js";import{C}from"./ClosePopup.3be4487d.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnGroup.7ea5ef23.js";import"./QMarkupTable.f4b57dd0.js";const G={name:"CajachicaPage",data(){return{cajachicas:[],cajachica:{},cajachicaDialog:!1,loading:!1,actionCajachica:"",filter:"",columns:[{name:"actions",label:"Acciones",align:"center"},{name:"recibo",label:"Recibo",align:"left",field:"recibo"},{name:"concepto",label:"Concepto",align:"left",field:"concepto"},{name:"monto",label:"Monto",align:"right",field:"monto"},{name:"fecha",label:"Fecha",align:"left",field:"fecha"},{name:"tipo_movimiento",label:"Tipo",align:"left",field:"tipo_movimiento"}]}},mounted(){this.cajachicasGet()},methods:{cajachicaNew(){this.cajachica={concepto:"",monto:0,fecha:"",tipo_movimiento:"",descripcion:""},this.actionCajachica="Nuevo",this.cajachicaDialog=!0},cajachicasGet(){this.loading=!0,this.$axios.get("cajachicas").then(c=>{this.cajachicas=c.data}).catch(c=>{this.$alert.error(c.response.data.message)}).finally(()=>{this.loading=!1})},cajachicaPost(){this.loading=!0,this.$axios.post("cajachicas",this.cajachica).then(()=>{this.cajachicasGet(),this.cajachicaDialog=!1,this.$alert.success("Movimiento creado")}).catch(c=>{this.$alert.error(c.response.data.message)}).finally(()=>{this.loading=!1})},cajachicaPut(){this.loading=!0,this.$axios.put(`cajachicas/${this.cajachica.id}`,this.cajachica).then(()=>{this.cajachicasGet(),this.cajachicaDialog=!1,this.$alert.success("Movimiento actualizado")}).catch(c=>{this.$alert.error(c.response.data.message)}).finally(()=>{this.loading=!1})},cajachicaEdit(c){this.cajachica={...c},this.actionCajachica="Editar",this.cajachicaDialog=!0},cajachicaDelete(c){this.$alert.dialog("\xBFDesea eliminar este movimiento?").onOk(()=>{this.loading=!0,this.$axios.delete(`cajachicas/${c}`).then(()=>{this.cajachicasGet(),this.$alert.success("Movimiento eliminado")}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})})}}},N={class:"text-right"};function P(c,l,B,I,i,s){return d(),m(U,{class:"q-pa-md"},{default:o(()=>[e(w,{rows:i.cajachicas,columns:i.columns,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"Movimientos de Caja Chica",filter:i.filter},{"top-right":o(()=>[e(n,{color:"primary",label:"Nuevo",onClick:s.cajachicaNew,outline:"","no-caps":"",icon:"add_circle_outline",loading:i.loading},null,8,["onClick","loading"]),e(t,{modelValue:i.filter,"onUpdate:modelValue":l[0]||(l[0]=a=>i.filter=a),label:"Buscar",dense:"",outlined:""},{append:o(()=>[e(u,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":o(a=>[e(y,{props:a},{default:o(()=>[e(k,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:o(()=>[e(_,null,{default:o(()=>[h((d(),m(g,{clickable:"",onClick:V=>s.cajachicaEdit(a.row)},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{name:"edit"})]),_:1}),e(r,null,{default:o(()=>[e(b,null,{default:o(()=>[p("Editar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[C]]),h((d(),m(g,{clickable:"",onClick:V=>s.cajachicaDelete(a.row.id)},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{name:"delete"})]),_:1}),e(r,null,{default:o(()=>[e(b,null,{default:o(()=>[p("Eliminar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[C]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),e(D,{modelValue:i.cajachicaDialog,"onUpdate:modelValue":l[10]||(l[10]=a=>i.cajachicaDialog=a),persistent:""},{default:o(()=>[e(v,null,{default:o(()=>[e(f,{class:"q-pb-none row items-center"},{default:o(()=>[j("div",null,Q(i.actionCajachica)+" movimiento ",1),e(x),e(n,{icon:"close",flat:"",round:"",dense:"",onClick:l[1]||(l[1]=a=>i.cajachicaDialog=!1)})]),_:1}),e(f,{class:"q-pt-none"},{default:o(()=>[e(M,{onSubmit:l[9]||(l[9]=a=>i.cajachica.id?s.cajachicaPut():s.cajachicaPost())},{default:o(()=>[e(t,{modelValue:i.cajachica.recibo,"onUpdate:modelValue":l[2]||(l[2]=a=>i.cajachica.recibo=a),label:"Recibo",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),e(t,{modelValue:i.cajachica.concepto,"onUpdate:modelValue":l[3]||(l[3]=a=>i.cajachica.concepto=a),label:"Concepto",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),e(t,{modelValue:i.cajachica.monto,"onUpdate:modelValue":l[4]||(l[4]=a=>i.cajachica.monto=a),modelModifiers:{number:!0},label:"Monto",dense:"",outlined:"",type:"number",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),e(t,{modelValue:i.cajachica.fecha,"onUpdate:modelValue":l[5]||(l[5]=a=>i.cajachica.fecha=a),label:"Fecha",dense:"",outlined:"",type:"date",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),e(q,{modelValue:i.cajachica.tipo_movimiento,"onUpdate:modelValue":l[6]||(l[6]=a=>i.cajachica.tipo_movimiento=a),label:"Tipo de Movimiento",dense:"",outlined:"",options:["Ingreso","Egreso"],rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),e(t,{modelValue:i.cajachica.descripcion,"onUpdate:modelValue":l[7]||(l[7]=a=>i.cajachica.descripcion=a),label:"Descripci\xF3n",type:"textarea",dense:"",outlined:""},null,8,["modelValue"]),j("div",N,[e(n,{color:"negative",label:"Cancelar",onClick:l[8]||(l[8]=a=>i.cajachicaDialog=!1),"no-caps":"",loading:i.loading},null,8,["loading"]),e(n,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:i.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var K=E(G,[["render",P]]);export{K as default};
