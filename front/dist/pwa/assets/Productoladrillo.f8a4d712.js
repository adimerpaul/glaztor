import{$ as p,a7 as m,a2 as a,a1 as i,aJ as k,a9 as f,aI as h,aG as _,a3 as g,a4 as e,a8 as x,C as b,a5 as d,bk as P,aH as c,b4 as Q,a0 as I,a6 as E,aT as q,aK as w,bi as S,bj as U}from"./index.9c72f88d.js";import{Q as N,b as D}from"./format.89ba0050.js";import{Q as A}from"./QBtnDropdown.6f220dc2.js";import{Q as M}from"./QImg.ea271ccd.js";import{Q as T}from"./QMarkupTable.cfe36cec.js";import{Q as B}from"./QPage.215302fc.js";import{Q as F}from"./QPageSticky.7a385ea6.js";import{Q as L}from"./QSpace.41e1f98e.js";import{Q as v}from"./QSelect.d21464ce.js";import{Q as z}from"./QForm.a9dcb4d2.js";import{C as V}from"./ClosePopup.49e3c41f.js";import{E as G}from"./Excel.343f1006.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnGroup.33606e46.js";import"./index.a93ba69a.js";import"./_commonjsHelpers.a26ce4be.js";const R={name:"productoladrillos",data(){return{productoladrillos:[],productoladrillo:{},dialog:!1,loading:!1}},mounted(){this.getProductos()},methods:{aumentarPorTonelada(){this.$q.dialog({title:"Aumentar ",message:"\xBFEst\xE1s seguro de que deseas aumentar la cantidad ?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"},prompt:{model:"1",type:"number",label:"Cantidad a aumentar",rules:[r=>!!r||"Este campo es requerido"]}}).onOk(r=>{const l=parseInt(this.productoladrillo.tonelada);this.productoladrillo.cantidad_pro=parseInt(r)*l+parseInt(this.productoladrillo.cantidad_pro)})},exportExcel(){let r=[{sheet:"Productoladrillos",columns:[{label:"Categoria Producto",value:"categoria_pro"},{label:"Marca Producto",value:"marca_pro"},{label:"Nombre Producto",value:"nombre_pro"},{label:"Descripcion Producto",value:"descripcion_pro"},{label:"Precio Producto",value:"precio_pro"},{label:"Precio compra",value:"precio_compra"},{label:"Cantidad en Stok",value:"cantidad_pro"},{label:"Tonelada por Producto",value:"tonelada"},{label:"Estado Producto",value:"estado_pro"}],content:this.productoladrillos}];G.export(r,"Reporte de Productos ladrillo")},showProducto(r){this.productoladrillo={...r},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,this.productoladrillo.id?this.$axios.put(`productoladrillos/${this.productoladrillo.id}`,this.productoladrillo).then(r=>{const l=this.productoladrillos.findIndex(u=>u.id===this.productoladrillo.id);this.productoladrillos[l]=r.data,this.dialog=!1}).catch(r=>{console.log(r)}).finally(()=>{this.loading=!1}):this.$axios.post("productoladrillos",this.productoladrillo).then(r=>{this.productoladrillos.push(r.data),this.dialog=!1}).catch(r=>{console.log(r)}).finally(()=>{this.loading=!1})},eliminar(r){this.$q.dialog({title:"Confirmar Eliminaci\xF3n",message:"\xBFEst\xE1s seguro de que deseas eliminar este producto?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete(`productoladrillos/${r.id}`).then(l=>{this.productoladrillos=this.productoladrillos.filter(u=>u.id!==r.id)}).catch(l=>{console.log(l)})})},dialogClick(){this.dialog=!0,this.productoladrillo={categoria_pro:"",marca_pro:"",nombre_pro:"",descripcion_pro:"",precio_pro:"",foto_pro:"",estado_pro:"Activo"}},getProductos(){this.$axios.get("productoladrillos").then(r=>{this.productoladrillos=r.data;const l=this.productoladrillos.some(s=>s.tonelada>0&&s.cantidad_pro/s.tonelada<2),u=this.productoladrillos.filter(s=>s.cantidad_pro&&s.tonelada&&s.cantidad_pro/s.tonelada<2);if(u.length>0){const s=u.map(t=>t.nombre_pro).join(", ");this.$q.dialog({title:"Inventario bajo",message:`Los siguientes productos est\xE1n agotados: ${s}`,ok:"Entendido"})}l&&this.$q.notify({color:"negative",icon:"warning",message:"Ya no hay inventario para algunos productos",position:"top",timeout:5e3})}).catch(r=>{console.log(r)})},previsualizarFoto(r){var l=new FileReader;l.readAsDataURL(r.target.files[0]),l.onload=()=>{this.foto=l.result,this.productoladrillo.foto_pro=this.foto}}},computed:{esMovil(){return this.$q.screen.lt.md}}},y=r=>(S("data-v-6eae2ca1"),r=r(),U(),r),j=y(()=>e("thead",null,[e("tr",null,[e("th",null,"Acciones"),e("th",null,"Nombre"),e("th",null,"Precio venta"),e("th",null,"Precio compra"),e("th",null,"Cantidad"),e("th",null,"Descripcion"),e("th",null,"Cant por Mayor"),e("th",null,"foto"),e("th",null,"estado"),e("th",null,"id"),e("th",null,"categoria"),e("th",null,"marca")])],-1)),H=["href"],J={class:"text-h6"},K={class:"row"},Y={class:"col-12"},W={class:"col-12"},X={class:"col-12"},Z={class:"col-12"},$={class:"col-6"},oo={class:"col-6"},lo={class:"col-12"},eo={class:"col-12"},to={class:"d-grid col-6 mx-auto mb-3"},ro=["src"],ao={key:1,height:"100",src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-256.png",class:"img-thumbnail",id:"fotoimg",alt:""},io={class:"input-group mb-3"},so=y(()=>e("span",{class:"input-group-text"},[e("i",{class:"fa-solid fa-gift"})],-1)),no={class:"col-12"};function uo(r,l,u,s,t,n){return p(),m(f,null,[a(B,{class:"bg-grey-2"},{default:i(()=>[a(h,{flat:"",bordered:""},{default:i(()=>[a(_,{class:"q-pa-xs"},{default:i(()=>[a(g,{icon:"download",color:"green",label:"Exportar",onClick:n.exportExcel,"no-caps":""},null,8,["onClick"]),a(T,{dense:"",class:"styled-table"},{default:i(()=>[j,e("tbody",null,[(p(!0),m(f,null,x(t.productoladrillos,(o,C)=>(p(),m("tr",{key:C},[e("td",null,[a(A,{size:"10px",color:"primary","no-caps":"",label:"Opciones",dense:"",class:"q-mr-sm"},{default:i(()=>[b((p(),I(N,{clickable:"",onClick:po=>n.showProducto(o)},{default:i(()=>[a(D,null,{default:i(()=>[E("Editar")]),_:1})]),_:2},1032,["onClick"])),[[q],[V]])]),_:2},1024)]),e("td",null,d(o.nombre_pro),1),e("td",null,d(o.precio_pro),1),e("td",null,d(o.precio_compra),1),e("td",null,d(o.cantidad_pro),1),e("td",null,d(o.descripcion_pro),1),e("td",null,d(o.tonelada),1),e("td",null,[o.foto_pro?(p(),m("a",{key:0,href:r.$url+".."+o.foto_pro,target:"_blank"},[a(M,{src:r.$url+".."+o.foto_pro,alt:"Imagen del producto",class:"img-thumbnail",height:"10"},null,8,["src"])],8,H)):w("",!0)]),e("td",null,d(o.estado_pro),1),e("td",null,d(o.id),1),e("td",null,d(o.categoria_pro),1),e("td",null,d(o.marca_pro),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),a(F,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:i(()=>[a(g,{fab:"",icon:"add",color:"primary",onClick:n.dialogClick},null,8,["onClick"])]),_:1}),a(k,{modelValue:t.dialog,"onUpdate:modelValue":l[14]||(l[14]=o=>t.dialog=o),position:n.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:i(()=>[a(h,{style:{width:"450px","max-width":"100vw"}},{default:i(()=>[a(_,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:i(()=>[b(a(g,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[V]]),a(L),e("div",J,d(t.productoladrillo.id?"Editar":"Nuevo")+" Producto ladrillo",1)]),_:1}),a(_,null,{default:i(()=>[a(z,{onSubmit:P(n.confirmarGuardar,["prevent"])},{default:i(()=>[e("div",K,[e("div",Y,[a(v,{dense:"",modelValue:t.productoladrillo.categoria_pro,"onUpdate:modelValue":l[0]||(l[0]=o=>t.productoladrillo.categoria_pro=o),options:["LADRILLO"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Tipo"},null,8,["modelValue","rules"])]),e("div",W,[a(c,{dense:"",modelValue:t.productoladrillo.marca_pro,"onUpdate:modelValue":l[1]||(l[1]=o=>t.productoladrillo.marca_pro=o),outlined:"",label:"Marca",rules:[o=>!!o||"Este campo es requerido"],onInput:l[2]||(l[2]=o=>t.productoladrillo.marca_pro=t.productoladrillo.marca_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),e("div",X,[a(c,{dense:"",modelValue:t.productoladrillo.nombre_pro,"onUpdate:modelValue":l[3]||(l[3]=o=>t.productoladrillo.nombre_pro=o),outlined:"",label:"Nombre Producto",rules:[o=>!!o||"Este campo es requerido"],onInput:l[4]||(l[4]=o=>t.productoladrillo.nombre_pro=t.productoladrillo.nombre_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),e("div",Z,[a(c,{dense:"",modelValue:t.productoladrillo.descripcion_pro,"onUpdate:modelValue":l[5]||(l[5]=o=>t.productoladrillo.descripcion_pro=o),outlined:"",label:"Descripcion Producto",onInput:l[6]||(l[6]=o=>t.productoladrillo.descripcion_pro=t.productoladrillo.descripcion_pro.toUpperCase()),hint:"",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),e("div",$,[a(c,{dense:"",modelValue:t.productoladrillo.precio_pro,"onUpdate:modelValue":l[7]||(l[7]=o=>t.productoladrillo.precio_pro=o),outlined:"",label:"Precio Venta",type:"number",hint:""},null,8,["modelValue"])]),e("div",oo,[a(c,{dense:"",modelValue:t.productoladrillo.precio_compra,"onUpdate:modelValue":l[8]||(l[8]=o=>t.productoladrillo.precio_compra=o),outlined:"",label:"Precio Compra",type:"number",hint:""},null,8,["modelValue"])]),e("div",lo,[a(c,{dense:"",modelValue:t.productoladrillo.cantidad_pro,"onUpdate:modelValue":l[9]||(l[9]=o=>t.productoladrillo.cantidad_pro=o),outlined:"",label:"Cantidad en stok",type:"number",hint:""},{after:i(()=>[a(g,{round:"",color:"positive",icon:"add",onClick:n.aumentarPorTonelada},null,8,["onClick"])]),_:1},8,["modelValue"])]),e("div",eo,[a(c,{dense:"",modelValue:t.productoladrillo.tonelada,"onUpdate:modelValue":l[10]||(l[10]=o=>t.productoladrillo.tonelada=o),outlined:"",label:"Cantidad Mayor general en ventas",type:"number",hint:""},null,8,["modelValue"])]),e("div",to,[t.productoladrillo.foto_pro?(p(),m("img",{key:0,src:t.productoladrillo.foto_pro.includes("data")?t.productoladrillo.foto_pro:r.$url+".."+t.productoladrillo.foto_pro,alt:"Imagen del producto",class:"img-thumbnail",height:"100"},null,8,ro)):(p(),m("img",ao))]),e("div",io,[so,e("input",{onChange:l[11]||(l[11]=(...o)=>n.previsualizarFoto&&n.previsualizarFoto(...o)),type:"file",accept:"image/png, image/jpg, image/gif",class:"form-control"},null,32)]),e("div",no,[a(v,{dense:"",modelValue:t.productoladrillo.estado_pro,"onUpdate:modelValue":l[12]||(l[12]=o=>t.productoladrillo.estado_pro=o),options:["Activo","Inactivo"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),a(Q,{align:"right"},{default:i(()=>[a(g,{label:"Cancelar",color:"negative",onClick:l[13]||(l[13]=o=>t.dialog=!1),loading:t.loading},null,8,["loading"]),a(g,{label:"Guardar",color:"primary",type:"submit",loading:t.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var Eo=O(R,[["render",uo],["__scopeId","data-v-6eae2ca1"]]);export{Eo as default};
