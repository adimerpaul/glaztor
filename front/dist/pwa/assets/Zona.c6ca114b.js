import{O as c,Y as m,R as a,Q as s,ax as b,_ as g,ay as f,az as p,T as i,Z as v,S as n,J as x,W as u,bd as y,aA as _,aC as C,b0 as k,b1 as q}from"./index.998bd65e.js";import{Q as V}from"./QPage.369d1f0c.js";import{Q}from"./QPageSticky.21b5b08b.js";import{Q as E,a as I}from"./QForm.b755ba32.js";import{Q as Z}from"./QSelect.16d28045.js";import{C as w}from"./ClosePopup.41fa9c67.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";const N={name:"zonas",data(){return{zonas:[],zona:{},dialog:!1,loading:!1}},mounted(){this.getZonas()},methods:{modificar(t){this.zona={...t},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.zona.id?this.$axios.put(`zonas/${this.zona.id}`,this.zona):this.$axios.post("zonas",this.zona)).then(e=>{if(e.status===200||e.status===201){if(this.zona.id){const r=this.zonas.findIndex(h=>h.id===this.zona.id);r!==-1&&this.$set(this.zonas,r,e.data)}else this.zonas.push(e.data);this.dialog=!1,this.$q.notify({color:"positive",message:"Zona guardada exitosamente.",icon:"check_circle"})}}).catch(e=>{console.error("Error al guardar la zona:",e),this.$q.notify({color:"positive",message:"Zona guardada exitosamente.",icon:"check_circle"})}).finally(()=>{this.loading=!1,this.dialog=!1,this.getZonas()})},eliminar(t){this.$q.dialog({title:"Eliminar Zona",message:"\xBFEst\xE1s seguro de que quieres eliminar esta zona?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.loading=!0,this.$axios.delete(`zonas/${t}`).then(e=>{this.zonas=this.zonas.filter(r=>r.id!==t),this.$q.notify({color:"positive",message:"Zona eliminada exitosamente.",icon:"check_circle"})}).catch(e=>{console.error("Error al eliminar la zona:",e),this.$q.notify({color:"negative",message:"Error al eliminar la zona. Intenta nuevamente.",icon:"report_problem"})}).finally(()=>{this.loading=!1})})},dialogClick(){this.dialog=!0,this.zona={nombre_zona:"",descripcion_zona:"",estado:"ACTIVO"}},getZonas(){this.$axios.get("zonas").then(t=>{this.zonas=t.data}).catch(t=>{console.error("Error al obtener las zonas:",t),this.$q.notify({color:"negative",message:"Error al obtener las zonas. Intenta nuevamente.",icon:"report_problem"})})}},computed:{esMovil(){return this.$q.screen.lt.md}}},A=t=>(k("data-v-68f30a26"),t=t(),q(),t),D={border:"1",style:{width:"100%"},class:"styled-table"},O=A(()=>i("thead",null,[i("tr",null,[i("th",null,"ID"),i("th",null,"Nombre Zona"),i("th",null,"Descripci\xF3n"),i("th",null,"Estado"),i("th",null,"Acciones")])],-1)),U={class:"text-h6"},B={class:"row"},G={class:"col-12"},M={class:"col-12"},T={class:"col-12"};function P(t,e,r,h,l,d){return c(),m(g,null,[a(V,{class:"bg-grey-3 q-pa-xs"},{default:s(()=>[a(f,null,{default:s(()=>[a(p,{class:"q-pa-xs"},{default:s(()=>[i("table",D,[O,i("tbody",null,[(c(!0),m(g,null,v(l.zonas,(o,F)=>(c(),m("tr",{key:o.id},[i("td",null,u(o.id),1),i("td",null,u(o.nombre_zona),1),i("td",null,u(o.descripcion_zona),1),i("td",null,u(o.estado),1),i("td",null,[a(n,{onClick:z=>d.eliminar(o.id),color:"negative",size:"xs",icon:"delete"},null,8,["onClick"]),a(n,{onClick:z=>d.modificar(o),class:"glossy",rounded:"",color:"deep-orange",label:"Modificar"},null,8,["onClick"])])]))),128))])])]),_:1})]),_:1})]),_:1}),a(Q,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:s(()=>[a(n,{fab:"",icon:"add",color:"primary",onClick:d.dialogClick},null,8,["onClick"])]),_:1}),a(b,{modelValue:l.dialog,"onUpdate:modelValue":e[6]||(e[6]=o=>l.dialog=o),position:d.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:s(()=>[a(f,{style:{width:"450px","max-width":"100vw"}},{default:s(()=>[a(p,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:s(()=>[x(a(n,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[w]]),a(E),i("div",U,u(l.zona.id?"Editar":"Nuevo")+" Zona",1)]),_:1}),a(p,null,{default:s(()=>[a(I,{onSubmit:y(d.confirmarGuardar,["prevent"])},{default:s(()=>[i("div",B,[i("div",G,[a(_,{dense:"",modelValue:l.zona.nombre_zona,"onUpdate:modelValue":e[0]||(e[0]=o=>l.zona.nombre_zona=o),outlined:"",label:"Nombre Zona",rules:[o=>!!o||"Este campo es requerido"],onInput:e[1]||(e[1]=o=>l.zona.nombre_zona=l.zona.nombre_zona.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),i("div",M,[a(_,{dense:"",modelValue:l.zona.descripcion_zona,"onUpdate:modelValue":e[2]||(e[2]=o=>l.zona.descripcion_zona=o),outlined:"",label:"Descripci\xF3n Zona",onInput:e[3]||(e[3]=o=>l.zona.descripcion_zona=l.zona.descripcion_zona.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),i("div",T,[a(Z,{dense:"",modelValue:l.zona.estado,"onUpdate:modelValue":e[4]||(e[4]=o=>l.zona.estado=o),options:["ACTIVO","INACTIVO"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),a(C,{align:"right"},{default:s(()=>[a(n,{label:"Cancelar",color:"negative",onClick:e[5]||(e[5]=o=>l.dialog=!1),loading:l.loading},null,8,["loading"]),a(n,{label:"Guardar",color:"primary",type:"submit",loading:l.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var H=S(N,[["render",P],["__scopeId","data-v-68f30a26"]]);export{H as default};
