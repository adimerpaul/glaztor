import{$ as m,a7 as p,a2 as n,a1 as s,aJ as y,a9 as f,aI as b,aG as h,a3 as g,a4 as o,a8 as k,C as v,a5 as r,bk as x,aH as u,b4 as Q,a0 as I,a6 as E,aT as q,aK as w,bi as N,bj as U}from"./index.accf20cf.js";import{Q as S,b as F}from"./format.bd4337e4.js";import{Q as T}from"./QBtnDropdown.f51cb189.js";import{Q as D}from"./QImg.9e4270be.js";import{Q as M}from"./QMarkupTable.975a4c67.js";import{Q as A}from"./QPage.3ff0f7ba.js";import{Q as O}from"./QPageSticky.a36e3638.js";import{Q as B}from"./QSpace.97ee4d87.js";import{Q as _}from"./QSelect.75d9adfb.js";import{Q as z}from"./QForm.74834cc1.js";import{C as V}from"./ClosePopup.37988abf.js";import{E as G}from"./Excel.343f1006.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnGroup.4d81c9b6.js";import"./index.a93ba69a.js";import"./_commonjsHelpers.a26ce4be.js";const R={name:"productocementos",data(){return{productocementos:[],productocemento:{},dialog:!1,loading:!1}},mounted(){this.getProductos()},methods:{aumentarPorTonelada(){this.$q.dialog({title:"Aumentar ",message:"\xBFEst\xE1s seguro de que deseas aumentar la cantidad ?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"},prompt:{model:"1",type:"number",label:"Cantidad a aumentar",rules:[a=>!!a||"Este campo es requerido"]}}).onOk(a=>{const t=parseInt(this.productocemento.tonelada);this.productocemento.cantidad=parseInt(a)*t+parseInt(this.productocemento.cantidad)})},exportExcel(){let a=[{sheet:"productocementos",columns:[{label:"Categoria Producto",value:"categoria"},{label:"Marca Producto",value:"marca"},{label:"Nombre Producto",value:"nombre"},{label:"Descripcion Producto",value:"descripcion"},{label:"Precio Producto",value:"precio"},{label:"Precio compra",value:"precio_compra"},{label:"Cantidad en Stok",value:"cantidad"},{label:"Tonelada por Producto",value:"tonelada"},{label:"Estado Producto",value:"estado"}],content:this.productocementos}];G.export(a,"Reporte de Productos ladrillo")},showProducto(a){this.productocemento={...a},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,this.productocemento.id?this.$axios.put(`productosCemento/${this.productocemento.id}`,this.productocemento).then(a=>{const t=this.productocementos.findIndex(c=>c.id===this.productocemento.id);this.productocementos[t]=a.data,this.dialog=!1}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1}):this.$axios.post("productoscemento",this.productocemento).then(a=>{this.dialog=!1,this.productocementos.push(a.data)}).catch(a=>{this.$alert.error(a.response.data.message)}).finally(()=>{this.loading=!1})},eliminar(a){this.$q.dialog({title:"Confirmar Eliminaci\xF3n",message:"\xBFEst\xE1s seguro de que deseas eliminar este producto?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete(`productocementos/${a.id}`).then(t=>{this.productocementos=this.productocementos.filter(c=>c.id!==a.id)}).catch(t=>{console.log(t)})})},dialogClick(){this.dialog=!0,this.productocemento={categoria:"",marca:"",nombre:"",descripcion:"",precio:"",numeroPedido:"",numeroFactura:"",foto:"",estado:""}},getProductos(){this.$axios.get("productocementos").then(a=>{this.productocementos=a.data;const t=this.productocementos.some(i=>i.tonelada>0&&i.cantidad/i.tonelada<2),c=this.productocementos.filter(i=>i.cantidad&&i.tonelada&&i.cantidad/i.tonelada<2);if(c.length>0){const i=c.map(l=>l.nombre).join(", ");this.$q.dialog({title:"Inventario bajo",message:`Los siguientes productos est\xE1n agotados: ${i}`,ok:"Entendido"})}t&&this.$q.notify({color:"negative",icon:"warning",message:"Ya no hay inventario para algunos productos",position:"top",timeout:5e3})}).catch(a=>{console.log(a)})},previsualizarFoto(a){var t=new FileReader;t.readAsDataURL(a.target.files[0]),t.onload=()=>{this.foto=t.result,this.productocemento.foto=this.foto}}},computed:{esMovil(){return this.$q.screen.lt.md}}},C=a=>(N("data-v-bc9b48d2"),a=a(),U(),a),L=C(()=>o("thead",null,[o("tr",null,[o("th",null,"Acciones"),o("th",null,"Nombre"),o("th",null,"Precio venta"),o("th",null,"Precio compra"),o("th",null,"Cantidad"),o("th",null,"Descripcion"),o("th",null,"Cant por Mayor"),o("th",null,"foto"),o("th",null,"Numero Pedido"),o("th",null,"Numero Factura"),o("th",null,"estado"),o("th",null,"id"),o("th",null,"categoria"),o("th",null,"marca")])],-1)),H=["href"],J={class:"text-h6"},K={class:"row"},Y={class:"col-12"},W={class:"col-12"},X={class:"col-12"},Z={class:"col-12"},$={class:"col-6"},ee={class:"col-6"},oe={class:"col-12"},te={class:"col-6"},le={class:"col-6"},ae={class:"d-grid col-6 mx-auto mb-3"},ne=["src"],se={key:1,height:"100",src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-256.png",class:"img-thumbnail",id:"fotoimg",alt:""},re={class:"input-group mb-3"},ie=C(()=>o("span",{class:"input-group-text"},[o("i",{class:"fa-solid fa-gift"})],-1)),de={class:"col-12"};function ue(a,t,c,i,l,d){return m(),p(f,null,[n(A,{class:"bg-grey-2"},{default:s(()=>[n(b,{flat:"",bordered:""},{default:s(()=>[n(h,{class:"q-pa-xs"},{default:s(()=>[n(g,{icon:"download",color:"green",label:"Exportar",onClick:d.exportExcel,"no-caps":""},null,8,["onClick"]),n(M,{dense:"",class:"styled-table"},{default:s(()=>[L,o("tbody",null,[(m(!0),p(f,null,k(l.productocementos,(e,P)=>(m(),p("tr",{key:P},[o("td",null,[n(T,{size:"10px",color:"primary","no-caps":"",label:"Opciones",dense:"",class:"q-mr-sm"},{default:s(()=>[v((m(),I(S,{clickable:"",onClick:ce=>d.showProducto(e)},{default:s(()=>[n(F,null,{default:s(()=>[E("Editar")]),_:1})]),_:2},1032,["onClick"])),[[q],[V]])]),_:2},1024)]),o("td",null,r(e.nombre),1),o("td",null,r(e.precio),1),o("td",null,r(e.precio_compra),1),o("td",null,r(e.cantidad),1),o("td",null,r(e.descripcion),1),o("td",null,r(e.tonelada),1),o("td",null,[e.foto?(m(),p("a",{key:0,href:a.$url+".."+e.foto,target:"_blank"},[n(D,{src:a.$url+".."+e.foto,alt:"Imagen del producto",class:"img-thumbnail",height:"10"},null,8,["src"])],8,H)):w("",!0)]),o("td",null,r(e.numeroPedido),1),o("td",null,r(e.numeroFactura),1),o("td",null,r(e.estado),1),o("td",null,r(e.id),1),o("td",null,r(e.categoria),1),o("td",null,r(e.marca),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),n(O,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:s(()=>[n(g,{fab:"",icon:"add",color:"primary",onClick:d.dialogClick},null,8,["onClick"])]),_:1}),n(y,{modelValue:l.dialog,"onUpdate:modelValue":t[15]||(t[15]=e=>l.dialog=e),position:d.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:s(()=>[n(b,{style:{width:"450px","max-width":"100vw"}},{default:s(()=>[n(h,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:s(()=>[v(n(g,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[V]]),n(B),o("div",J,r(l.productocemento.id?"Editar":"Nuevo")+" Producto cemento",1)]),_:1}),n(h,null,{default:s(()=>[n(z,{onSubmit:x(d.confirmarGuardar,["prevent"])},{default:s(()=>[o("div",K,[o("div",Y,[n(_,{dense:"",modelValue:l.productocemento.categoria,"onUpdate:modelValue":t[0]||(t[0]=e=>l.productocemento.categoria=e),options:["CEMENTO"],outlined:"",rules:[e=>!!e||"Este campo es requerido"],label:"Tipo"},null,8,["modelValue","rules"])]),o("div",W,[n(u,{dense:"",modelValue:l.productocemento.marca,"onUpdate:modelValue":t[1]||(t[1]=e=>l.productocemento.marca=e),outlined:"",label:"Marca",rules:[e=>!!e||"Este campo es requerido"],onInput:t[2]||(t[2]=e=>l.productocemento.marca=l.productocemento.marca.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),o("div",X,[n(u,{dense:"",modelValue:l.productocemento.nombre,"onUpdate:modelValue":t[3]||(t[3]=e=>l.productocemento.nombre=e),outlined:"",label:"Nombre Producto",rules:[e=>!!e||"Este campo es requerido"],onInput:t[4]||(t[4]=e=>l.productocemento.nombre=l.productocemento.nombre.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),o("div",Z,[n(u,{dense:"",modelValue:l.productocemento.descripcion,"onUpdate:modelValue":t[5]||(t[5]=e=>l.productocemento.descripcion=e),outlined:"",label:"Descripcion Producto",onInput:t[6]||(t[6]=e=>l.productocemento.descripcion=l.productocemento.descripcion.toUpperCase()),hint:"",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),o("div",$,[n(u,{dense:"",modelValue:l.productocemento.precio,"onUpdate:modelValue":t[7]||(t[7]=e=>l.productocemento.precio=e),outlined:"",label:"Precio Venta",type:"number",hint:""},null,8,["modelValue"])]),o("div",ee,[n(u,{dense:"",modelValue:l.productocemento.precio_compra,"onUpdate:modelValue":t[8]||(t[8]=e=>l.productocemento.precio_compra=e),outlined:"",label:"Precio Compra",type:"number",hint:""},null,8,["modelValue"])]),o("div",oe,[n(u,{dense:"",modelValue:l.productocemento.cantidad,"onUpdate:modelValue":t[9]||(t[9]=e=>l.productocemento.cantidad=e),outlined:"",label:"Cantidad en stok",type:"number",hint:""},{after:s(()=>[n(g,{round:"",color:"positive",icon:"add",onClick:d.aumentarPorTonelada},null,8,["onClick"])]),_:1},8,["modelValue"])]),o("div",te,[n(u,{dense:"",modelValue:l.productocemento.numeroPedido,"onUpdate:modelValue":t[10]||(t[10]=e=>l.productocemento.numeroPedido=e),outlined:"",label:"Numero de Pedido",hint:""},null,8,["modelValue"])]),o("div",le,[n(u,{dense:"",modelValue:l.productocemento.numeroFactura,"onUpdate:modelValue":t[11]||(t[11]=e=>l.productocemento.numeroFactura=e),outlined:"",label:"Numero de Factura",hint:""},null,8,["modelValue"])]),o("div",ae,[l.productocemento.foto?(m(),p("img",{key:0,src:l.productocemento.foto.includes("data")?l.productocemento.foto:a.$url+".."+l.productocemento.foto,alt:"Imagen del producto",class:"img-thumbnail",height:"100"},null,8,ne)):(m(),p("img",se))]),o("div",re,[ie,o("input",{onChange:t[12]||(t[12]=(...e)=>d.previsualizarFoto&&d.previsualizarFoto(...e)),type:"file",accept:"image/png, image/jpg, image/gif",class:"form-control"},null,32)]),o("div",de,[n(_,{dense:"",modelValue:l.productocemento.estado,"onUpdate:modelValue":t[13]||(t[13]=e=>l.productocemento.estado=e),options:["ACTIVO","INACTIVO"],outlined:"",rules:[e=>!!e||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),n(Q,{align:"right"},{default:s(()=>[n(g,{label:"Cancelar",color:"negative",onClick:t[14]||(t[14]=e=>l.dialog=!1),loading:l.loading},null,8,["loading"]),n(g,{label:"Guardar",color:"primary",type:"submit",loading:l.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var Ee=j(R,[["render",ue],["__scopeId","data-v-bc9b48d2"]]);export{Ee as default};
