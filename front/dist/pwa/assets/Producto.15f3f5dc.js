import{R as n,$ as p,U as r,T as a,aD as C,a1 as f,aC as g,aA as _,V as c,W as e,a0 as y,M as h,Z as i,bf as k,aB as u,a_ as P,S as Q,Y as E,aJ as w,aE as I,bd as U,be as q}from"./index.e95100ec.js";import{a as S,d as D}from"./format.39f6ce55.js";import{Q as M}from"./QBtnDropdown.4e846bde.js";import{Q as N}from"./QImg.96d15c3f.js";import{Q as R}from"./QMarkupTable.92a4f163.js";import{Q as B}from"./QPage.a2881a74.js";import{Q as F}from"./QPageSticky.6289ab09.js";import{Q as A}from"./QSpace.5ba5662b.js";import{Q as b}from"./QSelect.b493f8f7.js";import{Q as O}from"./QForm.c582a3d7.js";import{C as v}from"./ClosePopup.c6d1387a.js";import{E as T}from"./Excel.343f1006.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnGroup.8eaa3eca.js";import"./index.a93ba69a.js";import"./_commonjsHelpers.a26ce4be.js";const L={name:"productos",data(){return{productos:[],producto:{},dialog:!1,loading:!1}},mounted(){this.getProductos()},methods:{exportExcel(){let s=[{sheet:"Productos",columns:[{label:"Categoria Producto",value:"categoria_pro"},{label:"Marca Producto",value:"marca_pro"},{label:"Nombre Producto",value:"nombre_pro"},{label:"Descripcion Producto",value:"descripcion_pro"},{label:"Precio Producto",value:"precio_pro"},{label:"Precio compra",value:"precio_compra"},{label:"Cantidad en Stok",value:"cantidad_pro"},{label:"Tonelada por Producto",value:"tonelada"},{label:"Estado Producto",value:"estado_pro"}],content:this.productos}];T.export(s,"Reporte de Productos")},showProducto(s){this.producto={...s},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,this.producto.id?this.$axios.put(`productos/${this.producto.id}`,this.producto).then(s=>{const t=this.productos.findIndex(m=>m.id===this.producto.id);this.productos[t]=s.data,this.dialog=!1}).catch(s=>{console.log(s)}).finally(()=>{this.loading=!1}):this.$axios.post("productos",this.producto).then(s=>{this.productos.push(s.data),this.dialog=!1}).catch(s=>{console.log(s)}).finally(()=>{this.loading=!1})},eliminar(s){this.$q.dialog({title:"Confirmar Eliminaci\xF3n",message:"\xBFEst\xE1s seguro de que deseas eliminar este producto?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete(`productos/${s.id}`).then(t=>{this.productos=this.productos.filter(m=>m.id!==s.id)}).catch(t=>{console.log(t)})})},dialogClick(){this.dialog=!0,this.producto={categoria_pro:"",marca_pro:"",nombre_pro:"",descripcion_pro:"",precio_pro:"",foto_pro:"",estado_pro:"Activo"}},getProductos(){this.$axios.get("productos").then(s=>{this.productos=s.data}).catch(s=>{console.log(s)})},previsualizarFoto(s){var t=new FileReader;t.readAsDataURL(s.target.files[0]),t.onload=()=>{this.foto=t.result,this.producto.foto_pro=this.foto}}},computed:{esMovil(){return this.$q.screen.lt.md}}},V=s=>(U("data-v-561337d6"),s=s(),q(),s),G=V(()=>e("thead",null,[e("tr",null,[e("th",null,"acciones"),e("th",null,"nombre"),e("th",null,"precio venta"),e("th",null,"precio compra"),e("th",null,"Cantidad"),e("th",null,"descripcion"),e("th",null,"foto"),e("th",null,"estado"),e("th",null,"id"),e("th",null,"categoria"),e("th",null,"marca")])],-1)),j=["href"],J={class:"text-h6"},W={class:"row"},Y={class:"col-12"},Z={class:"col-12"},H={class:"col-12"},K={class:"col-12"},X={class:"col-6"},$={class:"col-6"},oo={class:"col-12"},eo={class:"col-12"},to={class:"d-grid col-6 mx-auto mb-3"},lo=["src"],ro={key:1,height:"100",src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-256.png",class:"img-thumbnail",id:"fotoimg",alt:""},so={class:"input-group mb-3"},ao=V(()=>e("span",{class:"input-group-text"},[e("i",{class:"fa-solid fa-gift"})],-1)),io={class:"col-12"};function no(s,t,m,uo,l,d){return n(),p(f,null,[r(B,{class:"bg-grey-2"},{default:a(()=>[r(g,{flat:"",bordered:""},{default:a(()=>[r(_,{class:"q-pa-xs"},{default:a(()=>[r(c,{icon:"download",color:"green",label:"Exportar",onClick:d.exportExcel,"no-caps":""},null,8,["onClick"]),r(R,{dense:"",class:"styled-table"},{default:a(()=>[G,e("tbody",null,[(n(!0),p(f,null,y(l.productos,(o,x)=>(n(),p("tr",{key:x},[e("td",null,[r(M,{size:"10px",color:"primary","no-caps":"",label:"Opciones",dense:"",class:"q-mr-sm"},{default:a(()=>[h((n(),Q(S,{clickable:"",onClick:po=>d.showProducto(o)},{default:a(()=>[r(D,null,{default:a(()=>[E("Editar")]),_:1})]),_:2},1032,["onClick"])),[[w],[v]])]),_:2},1024)]),e("td",null,i(o.nombre_pro),1),e("td",null,i(o.precio_pro),1),e("td",null,i(o.precio_compra),1),e("td",null,i(o.cantidad_pro),1),e("td",null,i(o.descripcion_pro),1),e("td",null,[o.foto_pro?(n(),p("a",{key:0,href:s.$url+".."+o.foto_pro,target:"_blank"},[r(N,{src:s.$url+".."+o.foto_pro,alt:"Imagen del producto",class:"img-thumbnail",height:"10"},null,8,["src"])],8,j)):I("",!0)]),e("td",null,i(o.estado_pro),1),e("td",null,i(o.id),1),e("td",null,i(o.categoria_pro),1),e("td",null,i(o.marca_pro),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),r(F,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:a(()=>[r(c,{fab:"",icon:"add",color:"primary",onClick:d.dialogClick},null,8,["onClick"])]),_:1}),r(C,{modelValue:l.dialog,"onUpdate:modelValue":t[14]||(t[14]=o=>l.dialog=o),position:d.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:a(()=>[r(g,{style:{width:"450px","max-width":"100vw"}},{default:a(()=>[r(_,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:a(()=>[h(r(c,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[v]]),r(A),e("div",J,i(l.producto.id?"Editar":"Nuevo")+" Producto",1)]),_:1}),r(_,null,{default:a(()=>[r(O,{onSubmit:k(d.confirmarGuardar,["prevent"])},{default:a(()=>[e("div",W,[e("div",Y,[r(b,{dense:"",modelValue:l.producto.categoria_pro,"onUpdate:modelValue":t[0]||(t[0]=o=>l.producto.categoria_pro=o),options:["CEMENTO","LADRILLO","FIERRO"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Tipo"},null,8,["modelValue","rules"])]),e("div",Z,[r(u,{dense:"",modelValue:l.producto.marca_pro,"onUpdate:modelValue":t[1]||(t[1]=o=>l.producto.marca_pro=o),outlined:"",label:"Marca",rules:[o=>!!o||"Este campo es requerido"],onInput:t[2]||(t[2]=o=>l.producto.marca_pro=l.producto.marca_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),e("div",H,[r(u,{dense:"",modelValue:l.producto.nombre_pro,"onUpdate:modelValue":t[3]||(t[3]=o=>l.producto.nombre_pro=o),outlined:"",label:"Nombre Producto",rules:[o=>!!o||"Este campo es requerido"],onInput:t[4]||(t[4]=o=>l.producto.nombre_pro=l.producto.nombre_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),e("div",K,[r(u,{dense:"",modelValue:l.producto.descripcion_pro,"onUpdate:modelValue":t[5]||(t[5]=o=>l.producto.descripcion_pro=o),outlined:"",label:"Descripcion Producto",onInput:t[6]||(t[6]=o=>l.producto.descripcion_pro=l.producto.descripcion_pro.toUpperCase()),hint:"",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),e("div",X,[r(u,{dense:"",modelValue:l.producto.precio_pro,"onUpdate:modelValue":t[7]||(t[7]=o=>l.producto.precio_pro=o),outlined:"",label:"Precio Venta",type:"number",hint:""},null,8,["modelValue"])]),e("div",$,[r(u,{dense:"",modelValue:l.producto.precio_compra,"onUpdate:modelValue":t[8]||(t[8]=o=>l.producto.precio_compra=o),outlined:"",label:"Precio Compra",type:"number",hint:""},null,8,["modelValue"])]),e("div",oo,[r(u,{dense:"",modelValue:l.producto.cantidad_pro,"onUpdate:modelValue":t[9]||(t[9]=o=>l.producto.cantidad_pro=o),outlined:"",label:"Cantidad en stok",type:"number",hint:""},null,8,["modelValue"])]),e("div",eo,[r(u,{dense:"",modelValue:l.producto.tonelada,"onUpdate:modelValue":t[10]||(t[10]=o=>l.producto.tonelada=o),outlined:"",label:"Cantidad Mayor general en ventas",type:"number",hint:""},null,8,["modelValue"])]),e("div",to,[l.producto.foto_pro?(n(),p("img",{key:0,src:l.producto.foto_pro.includes("data")?l.producto.foto_pro:s.$url+".."+l.producto.foto_pro,alt:"Imagen del producto",class:"img-thumbnail",height:"100"},null,8,lo)):(n(),p("img",ro))]),e("div",so,[ao,e("input",{onChange:t[11]||(t[11]=(...o)=>d.previsualizarFoto&&d.previsualizarFoto(...o)),type:"file",accept:"image/png, image/jpg, image/gif",class:"form-control"},null,32)]),e("div",io,[r(b,{dense:"",modelValue:l.producto.estado_pro,"onUpdate:modelValue":t[12]||(t[12]=o=>l.producto.estado_pro=o),options:["Activo","Inactivo"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),r(P,{align:"right"},{default:a(()=>[r(c,{label:"Cancelar",color:"negative",onClick:t[13]||(t[13]=o=>l.dialog=!1),loading:l.loading},null,8,["loading"]),r(c,{label:"Guardar",color:"primary",type:"submit",loading:l.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var wo=z(L,[["render",no],["__scopeId","data-v-561337d6"]]);export{wo as default};
