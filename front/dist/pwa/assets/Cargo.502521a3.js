import{Q as _,a as C}from"./QSelect.75d9adfb.js";import{$ as c,a0 as v,a1 as i,a2 as o,aG as u,a4 as l,a7 as p,a8 as x,a9 as k,aI as f,a3 as s,C as Q,a5 as d,bk as y,aH as h,b4 as V,aJ as w,a6 as E,bi as I,bj as S}from"./index.accf20cf.js";import{Q as q}from"./QMarkupTable.975a4c67.js";import{Q as N}from"./QPageSticky.a36e3638.js";import{Q as D}from"./QSpace.97ee4d87.js";import{Q as G}from"./QForm.74834cc1.js";import{Q as U}from"./QPage.3ff0f7ba.js";import{C as A}from"./ClosePopup.37988abf.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.bd4337e4.js";const M={name:"cargos",data(){return{cargos:[],cargo:{},dialog:!1,loading:!1}},mounted(){this.getCargos()},methods:{modificar(t){this.cargo={...t},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.cargo.id?this.$axios.put(`cargos/${this.cargo.id}`,this.cargo):this.$axios.post("cargos",this.cargo)).then(a=>{if(this.cargo.id){const g=this.cargos.findIndex(m=>m.id===this.cargo.id);this.cargos.splice(g,1,a.data)}else this.cargos.push(a.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}).catch(()=>{this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1})},eliminar(t){this.$q.dialog({title:"Eliminar Cargo",message:"\xBFEst\xE1s seguro de eliminar este cargo?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.$axios.delete(`cargos/${t}`).then(()=>{this.cargos=this.cargos.filter(a=>a.id!==t),this.$q.notify({color:"positive",message:"Eliminado con \xE9xito"})})})},dialogClick(){this.dialog=!0,this.cargo={nombre_cargo:"",descripcion_cargo:"",estado:"Activo"}},getCargos(){this.$axios.get("cargos").then(t=>{this.cargos=t.data})}},computed:{esMovil(){return this.$q.screen.lt.md}}},P=t=>(I("data-v-13e796b1"),t=t(),S(),t),z=P(()=>l("thead",null,[l("tr",null,[l("th",null,"ID"),l("th",null,"Nombre Cargo"),l("th",null,"Descripci\xF3n"),l("th",null,"Estado"),l("th",null,"Acciones")])],-1)),F={class:"row items-center"},O={class:"text-h6"};function T(t,a,g,m,r,n){return c(),v(U,{class:"bg-grey-2 q-pa-lg"},{default:i(()=>[o(f,null,{default:i(()=>[o(u,{class:"q-pa-sm"},{default:i(()=>[o(q,{dense:"","wrap-cells":""},{default:i(()=>[z,l("tbody",null,[(c(!0),p(k,null,x(r.cargos,(e,$)=>(c(),p("tr",{key:e.id},[l("td",null,d(e.id),1),l("td",null,d(e.nombre_cargo),1),l("td",null,d(e.descripcion_cargo),1),l("td",null,[o(C,{color:e.estado==="Activo"?"green":"red","text-color":"white",dense:""},{default:i(()=>[E(d(e.estado),1)]),_:2},1032,["color"])]),l("td",null,[o(s,{flat:"",dense:"",icon:"edit",color:"blue",label:"Editar",onClick:b=>n.modificar(e)},null,8,["onClick"]),o(s,{flat:"",dense:"",icon:"delete",color:"negative",label:"Eliminar",onClick:b=>n.eliminar(e.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),o(N,{position:"bottom-right",offset:[18,18]},{default:i(()=>[o(s,{fab:"",color:"primary",icon:"add",onClick:n.dialogClick},null,8,["onClick"])]),_:1}),o(w,{modelValue:r.dialog,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialog=e),maximized:n.esMovil},{default:i(()=>[o(f,{style:{width:"450px","max-width":"100vw"}},{default:i(()=>[o(u,{class:"bg-primary text-white"},{default:i(()=>[l("div",F,[Q(o(s,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[A]]),o(D),l("div",O,d(r.cargo.id?"Editar":"Nuevo")+" Cargo",1)])]),_:1}),o(u,null,{default:i(()=>[o(G,{onSubmit:y(n.confirmarGuardar,["prevent"])},{default:i(()=>[o(h,{dense:"",modelValue:r.cargo.nombre_cargo,"onUpdate:modelValue":a[0]||(a[0]=e=>r.cargo.nombre_cargo=e),outlined:"",label:"Nombre del Cargo",style:{"text-transform":"uppercase"},onInput:a[1]||(a[1]=e=>r.cargo.nombre_cargo=r.cargo.nombre_cargo.toUpperCase()),rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),o(h,{dense:"",modelValue:r.cargo.descripcion_cargo,"onUpdate:modelValue":a[2]||(a[2]=e=>r.cargo.descripcion_cargo=e),outlined:"",label:"Descripci\xF3n",style:{"text-transform":"uppercase"},onInput:a[3]||(a[3]=e=>r.cargo.descripcion_cargo=r.cargo.descripcion_cargo.toUpperCase())},null,8,["modelValue"]),o(_,{dense:"",modelValue:r.cargo.estado,"onUpdate:modelValue":a[4]||(a[4]=e=>r.cargo.estado=e),options:["Activo","Inactivo"],outlined:"",label:"Estado",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),o(V,{align:"right"},{default:i(()=>[o(s,{flat:"",label:"Cancelar",color:"negative",onClick:a[5]||(a[5]=e=>r.dialog=!1)}),o(s,{label:"Guardar",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]),_:1})}var ee=B(M,[["render",T],["__scopeId","data-v-13e796b1"]]);export{ee as default};
