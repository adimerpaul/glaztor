import{O as r,Y as f,R as i,Q as s,ax as B,_ as V,ay as g,az as p,T as d,aA as n,S as a,W as b,J as _,P as v,aB as m,aC as C}from"./index.5f1aaf33.js";import{Q as F}from"./QPageSticky.a6e1642a.js";import{Q as U}from"./QPage.ef24b83f.js";import{Q as w,a as y}from"./QForm.cfb1bf6c.js";import{Q as h}from"./QSelect.4f82e7ea.js";import{C as x}from"./ClosePopup.a953a791.js";import{h as c}from"./moment.40bc58bf.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";const k={name:"Pedidos",data(){return{fechaInicio:c().startOf("month").format("YYYY-MM-DD"),fechaFin:c().endOf("month").format("YYYY-MM-DD"),pedidos:[],pedido:{},loading:!1,dialog:!1,facturaBtnBool:!0,sinfacturaBtnBool:!0,clientes:[]}},mounted(){this.getPedidos(),this.getClientes()},methods:{submit(){this.loading=!0,this.$axios.post("pedidos",this.pedido).then(t=>{this.pedidos.push(t.data),this.dialog=!1}).catch(t=>{console.log(t)}).finally(()=>{this.loading=!1})},getClientes(){this.$axios.get("clientes").then(t=>{this.clientes=t.data}).catch(t=>{console.log(t)})},addPedido(){this.dialog=!0,this.pedido={fecha_hora:c().format("YYYY-MM-DD HH:mm:ss"),cliente:"",tipo:"",producto:"",cantidad:0,precio:0,factura:"",nombre_factura:"",nit_factura:"",direccion:"",contacto:"",telefono:"",telefono2:"",observacion:"",chofer:"",fecha_pago:c().format("YYYY-MM-DD")}},getPedidos(){this.loading=!0,this.$axios.get("pedidos").then(t=>{this.pedidos=t.data,this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})}},computed:{esMovil(){return this.$q.screen.lt.md}}},Q={class:"row"},P={class:"col-12 col-md-3"},S={class:"col-12 col-md-3"},D={class:"col-12 col-md-6 text-right"},M={class:"text-h6"},q={class:"row"},A={class:"col-12 col-md-12"},E={class:"row"},R={class:"col-12"},N={class:"col-12"},T={class:"col-12"},O={class:"col-12"},I={class:"col-6 q-pa-xs"},z={class:"col-6 q-pa-xs"},H={class:"col-12"},G={class:"col-12"},J={class:"col-12"},W={class:"col-12"},j={class:"col-12"},K={class:"col-12"},L={class:"col-12"};function X(t,l,Z,$,e,u){return r(),f(V,null,[i(U,{class:"bg-grey-3 q-pa-xs"},{default:s(()=>[i(g,null,{default:s(()=>[i(p,{class:"q-pa-xs"},{default:s(()=>[d("div",Q,[d("div",P,[i(n,{outlined:"",modelValue:e.fechaInicio,"onUpdate:modelValue":l[0]||(l[0]=o=>e.fechaInicio=o),label:"Fecha Inicio",type:"date",color:"white",dense:""},null,8,["modelValue"])]),d("div",S,[i(n,{outlined:"",modelValue:e.fechaFin,"onUpdate:modelValue":l[1]||(l[1]=o=>e.fechaFin=o),label:"Fecha Fin",type:"date",color:"white",dense:""},null,8,["modelValue"])]),d("div",D,[i(a,{icon:"search",color:"primary",label:"Buscar",onClick:u.getPedidos,loading:e.loading,"no-caps":""},null,8,["onClick","loading"])])])]),_:1})]),_:1}),d("pre",null,b(e.pedidos),1),d("pre",null,b(e.clientes),1),i(F,{position:"bottom-right",offset:[18,18]},{default:s(()=>[i(a,{fab:"",color:"primary",icon:"add",onClick:u.addPedido},null,8,["onClick"])]),_:1})]),_:1}),i(B,{modelValue:e.dialog,"onUpdate:modelValue":l[19]||(l[19]=o=>e.dialog=o),position:u.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:s(()=>[i(g,{style:{width:"450px","max-width":"100vw"}},{default:s(()=>[i(p,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:s(()=>[_(i(a,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[x]]),i(w),d("div",M,b(e.pedido.id?"Editar":"Nuevo")+" Pedido",1)]),_:1}),i(p,null,{default:s(()=>[e.pedido.id?(r(),v(y,{key:0,onSubmit:u.submit},{default:s(()=>[d("div",q,[d("div",A,[i(n,{modelValue:e.pedido,"onUpdate:modelValue":l[2]||(l[2]=o=>e.pedido=o),type:"date",outlined:""},null,8,["modelValue"])])])]),_:1},8,["onSubmit"])):m("",!0)]),_:1}),i(p,null,{default:s(()=>[e.pedido.id?m("",!0):(r(),v(y,{key:0,onSubmit:u.submit},{default:s(()=>[d("div",E,[d("div",R,[i(n,{dense:"",modelValue:e.pedido.fecha,"onUpdate:modelValue":l[3]||(l[3]=o=>e.pedido.fecha=o),outlined:"",label:"Fecha",type:"date"},null,8,["modelValue"])]),d("div",N,[i(h,{dense:"",modelValue:e.pedido.tipo,"onUpdate:modelValue":l[4]||(l[4]=o=>e.pedido.tipo=o),options:["FERRETERIA","OBRA","EMPRESA CONSTRUCTORA"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Tipo"},null,8,["modelValue","rules"])]),d("div",null,[i(h,{filled:"",modelValue:e.pedido.cliente,"onUpdate:modelValue":l[5]||(l[5]=o=>e.pedido.cliente=o),"use-input":"","input-debounce":"0",label:"Cliente",options:t.options,onFilter:t.filterFn,style:{width:"250px"},behavior:"menu"},null,8,["modelValue","options","onFilter"])]),d("div",null,[i(h,{filled:"",modelValue:e.pedido.producto,"onUpdate:modelValue":l[6]||(l[6]=o=>e.pedido.producto=o),"use-input":"","input-debounce":"0",label:"Producto",options:t.options,onFilter:t.filterFn,style:{width:"250px"},behavior:"menu"},null,8,["modelValue","options","onFilter"])]),d("div",T,[i(n,{dense:"",modelValue:e.pedido.cantidad,"onUpdate:modelValue":l[7]||(l[7]=o=>e.pedido.cantidad=o),outlined:"",label:"Candidad",type:"number"},null,8,["modelValue"])]),d("div",O,[i(n,{dense:"",modelValue:e.pedido.precio,"onUpdate:modelValue":l[8]||(l[8]=o=>e.pedido.precio=o),outlined:"",label:"Precio",type:"number"},null,8,["modelValue"])]),d("div",I,[i(a,{label:"CON FACTURA",outline:e.facturaBtnBool,class:"full-width","no-caps":"",color:"primary",onClick:l[9]||(l[9]=o=>e.facturaBtnBool=!e.facturaBtnBool)},null,8,["outline"])]),d("div",z,[i(a,{label:"SIN FACTURA",outline:e.sinfacturaBtnBool,class:"full-width","no-caps":"",color:"primary",onClick:l[10]||(l[10]=o=>e.sinfacturaBtnBool=!e.sinfacturaBtnBool)},null,8,["outline"])]),e.facturaBtnBool?m("",!0):(r(),f(V,{key:0},[d("div",H,[i(n,{dense:"",modelValue:e.pedido.nombre_factura,"onUpdate:modelValue":l[11]||(l[11]=o=>e.pedido.nombre_factura=o),outlined:"",label:"Nombre Factura"},null,8,["modelValue"])]),d("div",G,[i(n,{dense:"",modelValue:e.pedido.nit_factura,"onUpdate:modelValue":l[12]||(l[12]=o=>e.pedido.nit_factura=o),outlined:"",label:"Nit Factura",type:"number"},null,8,["modelValue"])])],64)),e.sinfacturaBtnBool?m("",!0):(r(),f(V,{key:1},[],64)),d("div",J,[i(n,{dense:"",modelValue:e.pedido.direccion,"onUpdate:modelValue":l[13]||(l[13]=o=>e.pedido.direccion=o),outlined:"",label:"Direccion",rules:[o=>!!o||"Este campo es requerido"]},null,8,["modelValue","rules"])]),d("div",W,[i(n,{dense:"",modelValue:e.pedido.contacto,"onUpdate:modelValue":l[14]||(l[14]=o=>e.pedido.contacto=o),outlined:"",label:"Contacto",rules:[o=>!!o||"Este campo es requerido"]},null,8,["modelValue","rules"])]),d("div",j,[i(n,{dense:"",modelValue:e.pedido.telefono,"onUpdate:modelValue":l[15]||(l[15]=o=>e.pedido.telefono=o),outlined:"",label:"Telefono 1",type:"number"},null,8,["modelValue"])]),d("div",K,[i(n,{dense:"",modelValue:e.pedido.telefono2,"onUpdate:modelValue":l[16]||(l[16]=o=>e.pedido.telefono2=o),outlined:"",label:"Telefono 2",type:"number"},null,8,["modelValue"])]),d("div",L,[i(n,{dense:"",modelValue:e.pedido.observacion,"onUpdate:modelValue":l[17]||(l[17]=o=>e.pedido.observacion=o),outlined:"",label:"Observacion"},null,8,["modelValue"])]),i(C,{align:"right"},{default:s(()=>[i(a,{label:"Cancelar",color:"negative",onClick:l[18]||(l[18]=o=>e.dialog=!1),loading:e.loading},null,8,["loading"]),i(a,{label:"Guardar",color:"primary",type:"submit",loading:e.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"]))]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var ae=Y(k,[["render",X]]);export{ae as default};
