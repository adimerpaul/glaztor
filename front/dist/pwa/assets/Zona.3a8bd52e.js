import{R as g,S as z,T as n,U as e,aA as d,W as u,V as s,aC as m,M as h,Z as b,bf as _,aB as f,a_ as v,aD as C}from"./index.fb39ef5c.js";import{Q as x}from"./QTd.544faa51.js";import{Q as y}from"./QTable.7a1fcc98.js";import{Q as k,a as Q}from"./QForm.17abe237.js";import{Q as q}from"./QSelect.02a30944.js";import{Q as E}from"./QPage.1546c910.js";import{C as V}from"./ClosePopup.128ae44a.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import"./QList.0be7a149.js";import"./QMarkupTable.47561889.js";const Z={name:"zonas",data(){return{zonas:[],zona:{},dialog:!1,loading:!1,columns:[{name:"id",label:"ID",align:"left",field:"id"},{name:"nombre_zona",label:"Nombre Zona",align:"left",field:"nombre_zona"},{name:"descripcion_zona",label:"Descripci\xF3n",align:"left",field:"descripcion_zona"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"Acciones",align:"center"}]}},mounted(){this.getZonas()},methods:{modificar(i){this.zona={...i},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.zona.id?this.$axios.put(`zonas/${this.zona.id}`,this.zona):this.$axios.post("zonas",this.zona)).then(o=>{if(o.status===200||o.status===201){if(this.zona.id){const r=this.zonas.findIndex(c=>c.id===this.zona.id);r!==-1&&this.zonas.splice(r,1,o.data)}else this.zonas.push(o.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}}).catch(o=>{console.error("Error al guardar la zona:",o),this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1,this.getZonas()})},eliminar(i){this.$q.dialog({title:"Eliminar Zona",message:"\xBFEst\xE1s seguro de que quieres eliminar esta zona?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.loading=!0,this.$axios.delete(`zonas/${i}`).then(o=>{this.zonas=this.zonas.filter(r=>r.id!==i),this.$q.notify({color:"positive",message:"Zona eliminada exitosamente.",icon:"check_circle"})}).catch(o=>{console.error("Error al eliminar la zona:",o),this.$q.notify({color:"negative",message:"Error al eliminar la zona.",icon:"error"})}).finally(()=>{this.loading=!1})})},dialogClick(){this.dialog=!0,this.zona={nombre_zona:"",descripcion_zona:"",estado:"Activo"}},getZonas(){this.$axios.get("zonas").then(i=>{this.zonas=i.data}).catch(i=>{console.error("Error al obtener las zonas:",i),this.$q.notify({color:"negative",message:"Error al obtener las zonas.",icon:"error"})})}}},S={class:"q-mb-md"},D={class:"text-h6"};function I(i,o,r,c,a,t){return g(),z(E,{class:"bg-grey-2 q-pa-md"},{default:n(()=>[e(m,{class:"rounded-borders shadow-4"},{default:n(()=>[e(d,{class:"q-pa-none"},{default:n(()=>[e(y,{rows:a.zonas,columns:a.columns,"row-key":"id",class:"styled-table",loading:a.loading,"no-data-label":"No se encontraron zonas"},{top:n(()=>[u("div",S,[e(s,{color:"primary",icon:"add",label:"Agregar Zona",onClick:t.dialogClick,rounded:"",class:"full-width"},null,8,["onClick"])])]),"body-cell-acciones":n(l=>[e(x,{props:l},{default:n(()=>[e(s,{size:"sm",color:"negative",icon:"delete",onClick:p=>t.eliminar(l.row.id),class:"q-mr-sm"},null,8,["onClick"]),e(s,{size:"sm",color:"deep-orange",label:"Modificar",onClick:p=>t.modificar(l.row),rounded:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1}),e(C,{modelValue:a.dialog,"onUpdate:modelValue":o[6]||(o[6]=l=>a.dialog=l),maximized:!0,persistent:""},{default:n(()=>[e(m,{style:{"max-width":"500px",width:"100%"}},{default:n(()=>[e(d,{class:"bg-primary text-white"},{default:n(()=>[h(e(s,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[V]]),e(k),u("div",D,b(a.zona.id?"Editar":"Nuevo")+" Zona",1)]),_:1}),e(d,null,{default:n(()=>[e(Q,{onSubmit:_(t.confirmarGuardar,["prevent"])},{default:n(()=>[e(f,{modelValue:a.zona.nombre_zona,"onUpdate:modelValue":o[0]||(o[0]=l=>a.zona.nombre_zona=l),outlined:"",label:"Nombre Zona",dense:"",autofocus:"",rules:[l=>!!l||"Este campo es requerido"],onInput:o[1]||(o[1]=l=>a.zona.nombre_zona=a.zona.nombre_zona.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"]),e(f,{modelValue:a.zona.descripcion_zona,"onUpdate:modelValue":o[2]||(o[2]=l=>a.zona.descripcion_zona=l),outlined:"",label:"Descripci\xF3n Zona",dense:"",onInput:o[3]||(o[3]=l=>a.zona.descripcion_zona=a.zona.descripcion_zona.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue"]),e(q,{modelValue:a.zona.estado,"onUpdate:modelValue":o[4]||(o[4]=l=>a.zona.estado=l),options:["Activo","Inactivo"],outlined:"",label:"Estado",dense:"",rules:[l=>!!l||"Este campo es requerido"]},null,8,["modelValue","rules"]),e(v,{align:"right"},{default:n(()=>[e(s,{label:"Cancelar",color:"negative",onClick:o[5]||(o[5]=l=>a.dialog=!1),loading:a.loading},null,8,["loading"]),e(s,{label:"Guardar",color:"primary",type:"submit",loading:a.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var R=w(Z,[["render",I],["__scopeId","data-v-3fe2f8b0"]]);export{R as default};
