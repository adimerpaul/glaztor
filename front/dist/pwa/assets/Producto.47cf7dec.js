import{Q as y}from"./QImg.21004dd7.js";import{O as n,Y as u,R as r,Q as i,ax as x,_,ay as f,az as m,T as e,Z as k,S as p,J as Q,W as a,P as I,aA as c,aC as w,aB as h,b0 as P,b1 as E}from"./index.998bd65e.js";import{Q as q}from"./QPage.369d1f0c.js";import{Q as S}from"./QPageSticky.21b5b08b.js";import{Q as U,a as O}from"./QForm.b755ba32.js";import{Q as b}from"./QSelect.16d28045.js";import{C as A}from"./ClosePopup.41fa9c67.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";const N={name:"productos",data(){return{productos:[],producto:{},dialog:!1,loading:!1}},mounted(){this.getProductos()},methods:{showProducto(s){this.producto=s,this.dialog=!0},submit(){this.loading=!0,this.$axios.post("productos",this.producto).then(s=>{this.productos.push(s.data),this.dialog=!1}).catch(s=>{console.log(s)}).finally(()=>{this.loading=!1})},eliminar(s){this.$q.dialog({title:"Confirmar Eliminaci\xF3n",message:"\xBFEst\xE1s seguro de que deseas eliminar este producto?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete(`productos/${s.id}`).then(t=>{this.productos=this.productos.filter(g=>g.id!==s.id)}).catch(t=>{console.log(t)})})},dialogClick(){this.dialog=!0,this.producto={categoria_pro:"",marca_pro:"",nombre_pro:"",descripcion_pro:"",precio_pro:"",foto_pro:"",estado_pro:"ACTIVO"}},getProductos(){this.$axios.get("productos").then(s=>{this.productos=s.data}).catch(s=>{console.log(s)})},previsualizarFoto(s){var t=new FileReader;t.readAsDataURL(s.target.files[0]),t.onload=()=>{this.foto=t.result,this.producto.foto_pro=this.foto}}},computed:{esMovil(){return this.$q.screen.lt.md}}},v=s=>(P("data-v-64fef6a0"),s=s(),E(),s),z={border:"1",style:{width:"100%"},class:"styled-table"},B=v(()=>e("thead",null,[e("tr",null,[e("th",null,"id"),e("th",null,"categoria"),e("th",null,"marca"),e("th",null,"nombre"),e("th",null,"descripcion"),e("th",null,"precio"),e("th",null,"foto"),e("th",null,"estado"),e("th",null,"acciones")])],-1)),D=["href"],R={class:"text-h6"},T={class:"row"},L={class:"col-12"},M={class:"col-12"},j={class:"col-12"},G={class:"col-12"},J={class:"col-12"},W={class:"d-grid col-6 mx-auto mb-3"},Y=["src"],Z={key:1,height:"100",src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-256.png",class:"img-thumbnail",id:"fotoimg",alt:""},H={class:"input-group mb-3"},K=v(()=>e("span",{class:"input-group-text"},[e("i",{class:"fa-solid fa-gift"})],-1)),X={class:"col-12"};function $(s,t,g,oo,l,d){return n(),u(_,null,[r(q,{class:"bg-grey-3 q-pa-xs"},{default:i(()=>[r(f,null,{default:i(()=>[r(m,{class:"q-pa-xs"},{default:i(()=>[e("table",z,[B,e("tbody",null,[(n(!0),u(_,null,k(l.productos,(o,C)=>(n(),u("tr",{key:C},[e("td",null,a(o.id),1),e("td",null,a(o.categoria_pro),1),e("td",null,a(o.marca_pro),1),e("td",null,a(o.nombre_pro),1),e("td",null,a(o.descripcion_pro),1),e("td",null,a(o.precio_pro),1),e("td",null,[o.foto_pro?(n(),u("a",{key:0,href:s.$url+".."+o.foto_pro,target:"_blank"},[r(y,{src:s.$url+".."+o.foto_pro,alt:"Imagen del producto",class:"img-thumbnail",height:"100"},null,8,["src"])],8,D)):h("",!0)]),e("td",null,a(o.estado_pro),1),e("td",null,[r(p,{onClick:V=>d.eliminar(o),color:"negative",size:"xs",icon:"delete"},null,8,["onClick"]),r(p,{onClick:V=>d.showProducto(o),class:"glossy",rounded:"",color:"deep-orange",label:"Modificar"},null,8,["onClick"])])]))),128))])])]),_:1})]),_:1})]),_:1}),r(S,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:i(()=>[r(p,{fab:"",icon:"add",color:"primary",onClick:d.dialogClick},null,8,["onClick"])]),_:1}),r(x,{modelValue:l.dialog,"onUpdate:modelValue":t[11]||(t[11]=o=>l.dialog=o),position:d.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:i(()=>[r(f,{style:{width:"450px","max-width":"100vw"}},{default:i(()=>[r(m,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:i(()=>[Q(r(p,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[A]]),r(U),e("div",R,a(l.producto.id?"Editar":"Nuevo")+" Producto",1)]),_:1}),r(m,null,{default:i(()=>[l.producto.id?h("",!0):(n(),I(O,{key:0,onSubmit:d.submit},{default:i(()=>[e("div",T,[e("div",L,[r(b,{dense:"",modelValue:l.producto.categoria_pro,"onUpdate:modelValue":t[0]||(t[0]=o=>l.producto.categoria_pro=o),options:["CEMENTO","LADRILLO","FIERRO"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Tipo"},null,8,["modelValue","rules"])]),e("div",M,[r(c,{dense:"",modelValue:l.producto.marca_pro,"onUpdate:modelValue":t[1]||(t[1]=o=>l.producto.marca_pro=o),outlined:"",label:"Marca",rules:[o=>!!o||"Este campo es requerido"],onInput:t[2]||(t[2]=o=>l.producto.marca_pro=l.producto.marca_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),e("div",j,[r(c,{dense:"",modelValue:l.producto.nombre_pro,"onUpdate:modelValue":t[3]||(t[3]=o=>l.producto.nombre_pro=o),outlined:"",label:"Nombre Producto",rules:[o=>!!o||"Este campo es requerido"],onInput:t[4]||(t[4]=o=>l.producto.nombre_pro=l.producto.nombre_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),e("div",G,[r(c,{dense:"",modelValue:l.producto.descripcion_pro,"onUpdate:modelValue":t[5]||(t[5]=o=>l.producto.descripcion_pro=o),outlined:"",label:"Descripcion Producto",onInput:t[6]||(t[6]=o=>l.producto.descripcion_pro=l.producto.descripcion_pro.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),e("div",J,[r(c,{dense:"",modelValue:l.producto.precio_pro,"onUpdate:modelValue":t[7]||(t[7]=o=>l.producto.precio_pro=o),outlined:"",label:"Precio Producto",type:"number"},null,8,["modelValue"])]),e("div",W,[l.producto.foto_pro?(n(),u("img",{key:0,src:l.producto.foto_pro,alt:"Imagen del producto",class:"img-thumbnail",height:"100"},null,8,Y)):(n(),u("img",Z))]),e("div",H,[K,e("input",{onChange:t[8]||(t[8]=(...o)=>d.previsualizarFoto&&d.previsualizarFoto(...o)),type:"file",accept:"image/png, image/jpg, image/gif",class:"form-control"},null,32)]),e("div",X,[r(b,{dense:"",modelValue:l.producto.estado_pro,"onUpdate:modelValue":t[9]||(t[9]=o=>l.producto.estado_pro=o),options:["ACTIVO","INACTIVO"],outlined:"",rules:[o=>!!o||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),r(w,{align:"right"},{default:i(()=>[r(p,{label:"Cancelar",color:"negative",onClick:t[10]||(t[10]=o=>l.dialog=!1),loading:l.loading},null,8,["loading"]),r(p,{label:"Guardar",color:"primary",type:"submit",loading:l.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"]))]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var uo=F(N,[["render",$],["__scopeId","data-v-64fef6a0"]]);export{uo as default};
