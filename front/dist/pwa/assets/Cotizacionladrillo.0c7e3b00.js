import{$ as u,a0 as m,a1 as t,a2 as a,a3 as r,aH as c,F as p,C as b,a6 as g,aI as Q,aG as _,a4 as h,a5 as x,aJ as D}from"./index.accf20cf.js";import{Q as v,b as d,a as V}from"./format.bd4337e4.js";import{Q as U}from"./QList.321ce9c4.js";import{Q as k}from"./QBtnDropdown.f51cb189.js";import{Q as y}from"./QTd.7e67d2f8.js";import{Q as w}from"./QTable.4ca8fae1.js";import{Q as F}from"./QSpace.97ee4d87.js";import{Q as s}from"./QSelect.75d9adfb.js";import{Q as E}from"./QForm.74834cc1.js";import{Q as S}from"./QPage.3ff0f7ba.js";import{C}from"./ClosePopup.37988abf.js";import{h as A}from"./moment.40bc58bf.js";import{E as N}from"./Excel.343f1006.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnGroup.4d81c9b6.js";import"./QMarkupTable.975a4c67.js";import"./index.a93ba69a.js";import"./_commonjsHelpers.a26ce4be.js";const B={name:"Cotizacionladrillos",data(){return{cotizacionladrillos:[],cotizacionladrillo:{},cotizacionDialog:!1,loading:!1,filter:"",productosAll:[],products:[],clientes:[],clientesAll:[],zonas:[],marcas:[],actionPeriodo:"",filter:"",columns:[{name:"actions",label:"Acciones",align:"center"},{name:"fecha",label:"Fecha",align:"left",field:"fecha"},{name:"cliente",label:"Cliente",align:"left",field:"cliente"},{name:"marca",label:"Marca",align:"left",field:"marca"},{name:"producto",label:"Producto",align:"left",field:"producto"},{name:"cantidad",label:"Cantidad",align:"left",field:"cantidad"},{name:"medida",label:"medida",align:"left",field:"medida"},{name:"zona",label:"Zona",align:"left",field:"zona"},{name:"precio_compra_cf",label:"Precio Compra CF",align:"left",field:"precio_compra_cf"},{name:"precio_compra_sf",label:"Precio Compra SF",align:"left",field:"precio_compra_sf"},{name:"precio_venta_cf",label:"Precio Venta CF",align:"left",field:"precio_venta_cf"},{name:"precio_venta_sf",label:"Precio Venta SF",align:"left",field:"precio_venta_sf"},{name:"observacion",label:"Observaci\xF3n",align:"left",field:"observacion"}]}},mounted(){this.cotizacionsGet(),this.getProductos(),this.getClientes(),this.getZonas()},methods:{exportExcel(){let i=[{sheet:"cotizacionladrillos",columns:[{label:"Fecha",value:"fecha"},{label:"Nombre del cliente",value:"cliente"},{label:"Marca",value:"marca"},{label:"Producto",value:"producto"},{label:"Cantidad",value:"cantidad"},{label:"medida",value:"medida"},{label:"Zona",value:"zona"},{label:"Precio_compra_cf",value:"precio_compra_cf"},{label:"Precio_compra_sf",value:"precio_compra_sf"},{label:"Precio_venta_cf",value:"precio_venta_cf"},{label:"Precio_venta_sf",value:"precio_venta_sf"},{label:"Observacion",value:"observacion"}],content:this.cotizacioncementos}];N.export(i,"Reporte de cotizacion ladrillo")},getZonas(){this.$axios.get("zonas").then(i=>{this.zonas=i.data}).catch(i=>{console.log(i)})},filterClientes(i,e){if(i===""){e(()=>{this.clientes=this.clientesAll});return}const f=i.toLowerCase();e(()=>{this.clientes=this.clientesAll.filter(z=>z.nombre_cliente.toLowerCase().indexOf(f)>-1)})},getClientes(){this.$axios.get("clientes").then(i=>{this.clientes=i.data,this.clientesAll=i.data}).catch(i=>{console.log(i)})},filterProducts(i){console.log(i),i!==null&&(this.products=this.productosAll.filter(e=>(e==null?void 0:e.marca_pro)===i))},getProductos(){this.$axios.get("productos").then(i=>{this.productosAll=i.data,this.products=this.productosAll,this.products.forEach(e=>{this.marcas.includes(e.marca_pro)||this.marcas.push(e.marca_pro)})}).catch(i=>{console.log(i)})},cotizacionNew(){this.cotizacionladrillo={fecha:A().format("YYYY-MM-DD"),cliente:"",marca:"",producto:"",cantidad:0,medida:"Un",zona:"",precio_compra_cf:0,precio_compra_sf:0,precio_venta_cf:0,precio_venta_sf:0,observacion:""},this.actionPeriodo="Nueva",this.cotizacionDialog=!0},cotizacionsGet(){this.loading=!0,this.$axios.get("cotizacionladrillos").then(i=>{this.cotizacionladrillos=i.data}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})},cotizacionPost(){this.loading=!0,this.$axios.post("cotizacionladrillos",this.cotizacionladrillo).then(i=>{this.cotizacionsGet(),this.cotizacionDialog=!1,this.$alert.success("Cotizacion creada")}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})},cotizacionPut(){this.loading=!0,this.$axios.put("cotizacionladrillos/"+this.cotizacionladrillo.id,this.cotizacionladrillo).then(i=>{this.cotizacionsGet(),this.cotizacionDialog=!1,this.$alert.success("Cotizacion actualizada")}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})},cotizacionEdit(i){this.cotizacionladrillo={...i},this.actionPeriodo="Editar",this.cotizacionDialog=!0},cotizacionDelete(i){this.$alert.dialog("\xBFDesea eliminar la cotizacion?").onOk(()=>{this.loading=!0,this.$axios.delete("cotizacionladrillos/"+i).then(e=>{this.cotizacionsGet(),this.$alert.success("Cotizacion eliminada")}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})})}}},I={class:"text-right"};function M(i,e,f,z,l,n){return u(),m(S,{class:"q-pa-md"},{default:t(()=>[a(w,{rows:l.cotizacionladrillos,columns:l.columns,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"cotizacioncementos",filter:l.filter},{"top-right":t(()=>[a(r,{icon:"download",color:"green",label:"Exportar",onClick:n.exportExcel,"no-caps":""},null,8,["onClick"]),a(r,{color:"primary",label:"Nuevo",onClick:n.cotizacionNew,outline:"","no-caps":"",icon:"add_circle_outline",loading:l.loading},null,8,["onClick","loading"]),a(c,{modelValue:l.filter,"onUpdate:modelValue":e[0]||(e[0]=o=>l.filter=o),label:"Buscar",dense:"",outlined:""},{append:t(()=>[a(p,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":t(o=>[a(y,{props:o},{default:t(()=>[a(k,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:t(()=>[a(U,null,{default:t(()=>[b((u(),m(v,{clickable:"",onClick:P=>n.cotizacionEdit(o.row)},{default:t(()=>[a(d,{avatar:""},{default:t(()=>[a(p,{name:"edit"})]),_:1}),a(d,null,{default:t(()=>[a(V,null,{default:t(()=>[g("Editar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[C]]),b((u(),m(v,{clickable:"",onClick:P=>n.cotizacionDelete(o.row.id)},{default:t(()=>[a(d,{avatar:""},{default:t(()=>[a(p,{name:"delete"})]),_:1}),a(d,null,{default:t(()=>[a(V,null,{default:t(()=>[g("Eliminar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[C]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),a(D,{modelValue:l.cotizacionDialog,"onUpdate:modelValue":e[16]||(e[16]=o=>l.cotizacionDialog=o),persistent:""},{default:t(()=>[a(Q,null,{default:t(()=>[a(_,{class:"q-pb-none row items-center"},{default:t(()=>[h("div",null,x(l.actionPeriodo)+" Cotizacion Ladrillo ",1),a(F),a(r,{icon:"close",flat:"",round:"",dense:"",onClick:e[1]||(e[1]=o=>l.cotizacionDialog=!1)})]),_:1}),a(_,{class:"q-pt-none"},{default:t(()=>[a(E,{onSubmit:e[15]||(e[15]=o=>l.cotizacionladrillo.id?n.cotizacionPut():n.cotizacionPost())},{default:t(()=>[a(c,{modelValue:l.cotizacionladrillo.fecha,"onUpdate:modelValue":e[2]||(e[2]=o=>l.cotizacionladrillo.fecha=o),label:"Fecha",dense:"",outlined:"",type:"date",disable:!0},null,8,["modelValue"]),a(s,{modelValue:l.cotizacionladrillo.cliente,"onUpdate:modelValue":[e[3]||(e[3]=o=>l.cotizacionladrillo.cliente=o),i.changeDirecionTelefono],onFilter:n.filterClientes,rules:[o=>!!o||"Seleccione un cliente"],filled:"","emit-value":"","map-options":"",standout:"","use-input":"",label:"Cliente",options:l.clientes,"option-value":"id","option-label":"nombre_cliente",dense:"",clearable:""},null,8,["modelValue","onFilter","onUpdate:modelValue","rules","options"]),a(s,{modelValue:l.cotizacionladrillo.marca,"onUpdate:modelValue":[e[4]||(e[4]=o=>l.cotizacionladrillo.marca=o),n.filterProducts],label:"Marca",dense:"",outlined:"","use-input":"",options:l.marcas},null,8,["modelValue","onUpdate:modelValue","options"]),a(s,{modelValue:l.cotizacionladrillo.producto,"onUpdate:modelValue":e[5]||(e[5]=o=>l.cotizacionladrillo.producto=o),label:"Producto",dense:"",outlined:"","use-input":"","option-label":"nombre_pro","option-value":"nombre_pro","emit-value":"","map-options":"",options:l.products},null,8,["modelValue","options"]),a(c,{modelValue:l.cotizacionladrillo.cantidad,"onUpdate:modelValue":e[6]||(e[6]=o=>l.cotizacionladrillo.cantidad=o),label:"Cantidad",type:"number",dense:"",outlined:"",rules:[o=>!!o||"Campo requerido"]},null,8,["modelValue","rules"]),a(s,{modelValue:l.cotizacionladrillo.medida,"onUpdate:modelValue":e[7]||(e[7]=o=>l.cotizacionladrillo.medida=o),filled:"",standout:"",label:"Medida",dense:"",outlined:"",options:[{label:"Un",value:"un"},{label:"Tra",value:"tra"},{label:"Kg",value:"kg"}],"option-value":"value","option-label":"label","emit-value":"","map-options":""},null,8,["modelValue"]),a(s,{modelValue:l.cotizacionladrillo.zona,"onUpdate:modelValue":e[8]||(e[8]=o=>l.cotizacionladrillo.zona=o),filled:"",standout:"",label:"Zona",dense:"",outlined:"",options:l.zonas,"option-value":"nombre_zona","option-label":"nombre_zona","emit-value":"","map-options":""},null,8,["modelValue","options"]),a(c,{modelValue:l.cotizacionladrillo.precio_compra_cf,"onUpdate:modelValue":e[9]||(e[9]=o=>l.cotizacionladrillo.precio_compra_cf=o),label:"Precio Compra CF",type:"number",dense:"",outlined:""},null,8,["modelValue"]),a(c,{modelValue:l.cotizacionladrillo.precio_compra_sf,"onUpdate:modelValue":e[10]||(e[10]=o=>l.cotizacionladrillo.precio_compra_sf=o),label:"Precio Compra SF",type:"number",dense:"",outlined:""},null,8,["modelValue"]),a(c,{modelValue:l.cotizacionladrillo.precio_venta_cf,"onUpdate:modelValue":e[11]||(e[11]=o=>l.cotizacionladrillo.precio_venta_cf=o),label:"Precio Venta CF",type:"number",dense:"",outlined:""},null,8,["modelValue"]),a(c,{modelValue:l.cotizacionladrillo.precio_venta_sf,"onUpdate:modelValue":e[12]||(e[12]=o=>l.cotizacionladrillo.precio_venta_sf=o),label:"Precio Venta SF",type:"number",dense:"",outlined:""},null,8,["modelValue"]),a(c,{modelValue:l.cotizacionladrillo.observacion,"onUpdate:modelValue":e[13]||(e[13]=o=>l.cotizacionladrillo.observacion=o),label:"Observaci\xF3n",dense:"",outlined:"",type:"textarea"},null,8,["modelValue"]),h("div",I,[a(r,{color:"negative",label:"Cancelar",onClick:e[14]||(e[14]=o=>l.cotizacionDialog=!1),"no-caps":"",loading:l.loading},null,8,["loading"]),a(r,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:l.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ae=G(B,[["render",M]]);export{ae as default};
