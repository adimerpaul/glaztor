import{M as v,O as r,Y as u,R as s,Q as n,ax as z,_ as g,ay as V,az as h,T as t,Z as _,S as m,J as k,W as a,P as b,aA as d,aC as E,b0 as U,b1 as w}from"./index.397ce38d.js";import{Q as M}from"./QPage.107853e6.js";import{Q as q,a as f}from"./QSelect.66d9ec37.js";import{Q as I,a as Q}from"./QForm.9f25e82e.js";import{C as S}from"./ClosePopup.5f97b628.js";import{h as L}from"./moment.40bc58bf.js";import{i as Z,v as B,u as T}from"./vue-leaflet.es.d3adeb18.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";const D={name:"ejecutivos",components:{LMap:Z,LTileLayer:B,LMarker:T},data(){return{tileProviders:[{name:"Mapa",visible:!0,url:"https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}",attribution:"&copy; Google Maps"},{name:"Satelite",visible:!1,url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",attribution:"&copy; Google Maps"}],location:[-17.969753,-67.114749],zoom:15,propietarioBtnBool:!0,encargadoBtnBool:!0,ejecutivos:[],zonas:[],zona:{},cargos:[],ejecutivo:{},dialog:!1,loading:!1,nuevoEjecutivo:{zona_id:null}}},mounted(){this.getEjecutivo(),this.getZonas(),this.getCargos()},methods:{getZonas(){this.loading=!0,this.$axios.get("zonas").then(i=>{this.zonas=i.data.map(l=>({id:l.id,nombre_zona:l.nombre_zona}))}).catch(i=>{console.error("Error al obtener las zonas:",i),this.$q.notify({color:"negative",message:"Error al obtener las zonas. Intenta nuevamente.",icon:"report_problem"})}).finally(()=>{this.loading=!1})},getCargos(){this.$axios.get("cargos").then(i=>{this.cargos=i.data}).catch(i=>{console.error("Error al obtener los cargos:",i)})},modificar(i){this.ejecutivo={...i},this.dialog=!0},confirmarGuardar(){},eliminar(i){},dialogClick(){this.dialog=!0,this.ejecutivo={nombre:"",cargo_id:null}},getEjecutivo(){this.$axios.get("ejecutivos").then(i=>{this.ejecutivos=i.data,this.getZonas(),this.getCargos()}).catch(i=>{console.log(i)})},showEjecutivo(i){this.ejecutivo=i,this.dialog=!0;const l=i.ubicacion.split(",").map(Number);console.log(l),this.location=l},onMarkerMoveEnd(i){const c=i.target.getLatLng();this.location=[c.lat,c.lng],this.ejecutivo.ubicacion=`${c.lat.toFixed(7)}, ${c.lng.toFixed(7)}`},myLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(i=>{this.location=[i.coords.latitude,i.coords.longitude],this.ejecutivo.ubicacion=`${i.coords.latitude}, ${i.coords.longitude}`})},submit(){this.loading=!0,this.$axios.post("ejecutivos",this.ejecutivo).then(i=>{this.ejecutivos.push(i.data),this.dialog=!1}).catch(i=>{console.log(i)}).finally(()=>{this.loading=!1})},dialogClick(){this.dialog=!0,this.ejecutivo={nombre_eje:"",apellido_eje:"",telefono_1:"",telefono_2:"",cargo:"",apodo:"",correo:"",direccion:"",ubicacion:"-17.969753, -67.114749",zona:"",cumple:L().format("YYYY-MM-DD"),estado:"ACTIVO"}}},computed:{esMovil(){return this.$q.screen.lt.md}}},N=i=>(U("data-v-7472160e"),i=i(),w(),i),Y={border:"1",style:{width:"100%","border-collapse":"collapse"},class:"styled-table"},F=N(()=>t("thead",null,[t("tr",null,[t("th",{style:{padding:"5px"}},"Nombre"),t("th",{style:{padding:"5px"}},"Apellido"),t("th",{style:{padding:"5px"}},"Telefono"),t("th",{style:{padding:"5px"}},"Telefono 2"),t("th",{style:{padding:"5px"}},"Cargo"),t("th",{style:{padding:"5px"}},"seud\xF3nimo"),t("th",{style:{padding:"5px"}},"Correo"),t("th",{style:{padding:"5px"}},"Direccion"),t("th",{style:{width:"10%",padding:"5px"}},"Ubicacion"),t("th",{style:{padding:"5px"}},"Zona"),t("th",{style:{padding:"5px"}},"Cumplea\xF1os"),t("th",{style:{padding:"5px"}},"Estado")])],-1)),G={style:{padding:"5px","line-height":"1.2"}},O={style:{padding:"5px","line-height":"1.2"}},W={style:{padding:"5px","line-height":"1.2"}},J={style:{padding:"5px","line-height":"1.2"}},R={style:{padding:"5px","line-height":"1.2"}},H={style:{padding:"5px","line-height":"1.2"}},K={style:{padding:"5px","line-height":"1.2"}},P={style:{padding:"5px","line-height":"1.2"}},X={style:{padding:"2px","line-height":"1.2"}},$={style:{padding:"5px","line-height":"1.2"}},ee={style:{padding:"5px","line-height":"1.2"}},oe={style:{padding:"5px","line-height":"1.2"}},le={class:"text-h6"},te={class:"row"},ie={class:"col-12"},se={class:"col-12"},ne={class:"col-12"},ae={class:"col-12"},re={class:"col-12"},de={class:"col-12"},ue={class:"col-12"},ce={class:"col-12"},pe={class:"col-12"},me={class:"col-12"},ge={style:{height:"250px",width:"100%"}},ve={class:"col-12"},he={class:"col-12"},_e={class:"col-12"},be={key:1,class:"row"},fe={class:"col-5"},ye={style:{height:"150px",width:"100%"}};function je(i,l,c,xe,o,p){const y=v("l-tile-layer"),j=v("l-marker"),x=v("l-map");return r(),u(g,null,[s(M,{class:"bg-grey-3 q-pa-xs"},{default:n(()=>[s(V,null,{default:n(()=>[s(h,{class:"q-pa-xs"},{default:n(()=>[t("table",Y,[F,t("tbody",null,[(r(!0),u(g,null,_(o.ejecutivos,(e,C)=>(r(),u("tr",{key:C},[t("td",G,a(e.nombre_eje),1),t("td",O,a(e.apellido_eje),1),t("td",W,a(e.telefono_1),1),t("td",J,a(e.telefono_2),1),t("td",R,a(e.cargo),1),t("td",H,a(e.apodo),1),t("td",K,a(e.correo),1),t("td",P,a(e.direccion),1),t("td",X,a(e.ubicacion)+" ver ubicacion ",1),t("td",$,a(e.zona),1),t("td",ee,a(e.cumple),1),t("td",oe,a(e.estado),1)]))),128))])])]),_:1})]),_:1})]),_:1}),s(q,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:n(()=>[s(m,{fab:"",icon:"add",color:"primary",onClick:p.dialogClick},null,8,["onClick"])]),_:1}),s(z,{modelValue:o.dialog,"onUpdate:modelValue":l[20]||(l[20]=e=>o.dialog=e),position:p.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:n(()=>[s(V,{style:{width:"450px","max-width":"100vw"}},{default:n(()=>[s(h,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:n(()=>[k(s(m,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[S]]),s(I),t("div",le,a(o.ejecutivo.id?"Editar":"Nuevo")+" Ejecutivo",1)]),_:1}),s(h,null,{default:n(()=>[o.ejecutivo.id?(r(),u("div",be,[t("div",fe,[t("div",ye,[s(x,{ref:"map",zoom:o.zoom,"onUpdate:zoom":l[19]||(l[19]=e=>o.zoom=e),"use-global-leaflet":!1,center:o.location,scrollWheelZoom:!1,dragging:!1,touchZoom:!1,doubleClickZoom:!1,boxZoom:!1,keyboard:!1},{default:n(()=>[(r(!0),u(g,null,_(o.tileProviders,e=>(r(),b(y,{key:e.name,name:e.name,visible:e.visible,url:e.url,attribution:e.attribution,"layer-type":"base"},null,8,["name","visible","url","attribution"]))),128)),s(j,{"lat-lng":o.location,ref:"marker"},null,8,["lat-lng"])]),_:1},8,["zoom","center"])])])])):(r(),b(Q,{key:0,onSubmit:p.submit},{default:n(()=>[t("div",te,[t("div",ie,[s(d,{dense:"",modelValue:o.ejecutivo.nombre_eje,"onUpdate:modelValue":l[0]||(l[0]=e=>o.ejecutivo.nombre_eje=e),outlined:"",label:"Nombre",rules:[e=>!!e||"Este campo es requerido"],onInput:l[1]||(l[1]=e=>o.ejecutivo.nombre_eje=o.ejecutivo.nombre_eje.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),t("div",se,[s(d,{dense:"",modelValue:o.ejecutivo.apellido_eje,"onUpdate:modelValue":l[2]||(l[2]=e=>o.ejecutivo.apellido_eje=e),outlined:"",label:"Apellido",rules:[e=>!!e||"Este campo es requerido"],onInput:l[3]||(l[3]=e=>o.ejecutivo.apellido_eje=o.ejecutivo.apellido_eje.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),t("div",ne,[s(d,{dense:"",modelValue:o.ejecutivo.telefono_1,"onUpdate:modelValue":l[4]||(l[4]=e=>o.ejecutivo.telefono_1=e),outlined:"",label:"Telefono ejecutivo",type:"number",rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"])]),t("div",ae,[s(d,{dense:"",modelValue:o.ejecutivo.telefono_2,"onUpdate:modelValue":l[5]||(l[5]=e=>o.ejecutivo.telefono_2=e),outlined:"",label:"Telefono ejecutivo 2",type:"number"},null,8,["modelValue"])]),t("div",re,[s(f,{dense:"",modelValue:o.ejecutivo.cargo_id,"onUpdate:modelValue":l[6]||(l[6]=e=>o.ejecutivo.cargo_id=e),options:o.cargos,outlined:"",rules:[e=>!!e||"Este campo es requerido"],label:"Cargo","option-label":"nombre_cargo","option-value":"id"},null,8,["modelValue","options","rules"])]),t("div",de,[s(d,{dense:"",modelValue:o.ejecutivo.apodo,"onUpdate:modelValue":l[7]||(l[7]=e=>o.ejecutivo.apodo=e),outlined:"",label:"seud\xF3nimo",rules:[e=>!!e||"Este campo es requerido"],onInput:l[8]||(l[8]=e=>o.ejecutivo.apodo=o.ejecutivo.apodo.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),t("div",ue,[s(d,{dense:"",modelValue:o.ejecutivo.correo,"onUpdate:modelValue":l[9]||(l[9]=e=>o.ejecutivo.correo=e),outlined:"",label:"Correo",rules:[e=>!!e||"Este campo es requerido"],onInput:l[10]||(l[10]=e=>o.ejecutivo.correo=o.ejecutivo.correo.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),t("div",ce,[s(d,{dense:"",modelValue:o.ejecutivo.direccion,"onUpdate:modelValue":l[11]||(l[11]=e=>o.ejecutivo.direccion=e),outlined:"",label:"Direcci\xF3n",rules:[e=>!!e||"Este campo es requerido"],onInput:l[12]||(l[12]=e=>o.ejecutivo.direccion=o.ejecutivo.direccion.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),t("div",pe,[s(d,{dense:"",modelValue:o.ejecutivo.ubicacion,"onUpdate:modelValue":l[13]||(l[13]=e=>o.ejecutivo.ubicacion=e),outlined:"",label:"Ubicacion"},{append:n(()=>[s(m,{flat:"",icon:"fa-solid fa-map-marker-alt",onClick:p.myLocation},null,8,["onClick"])]),_:1},8,["modelValue"])]),t("div",me,[t("div",ge,[s(x,{ref:"map",zoom:o.zoom,"onUpdate:zoom":l[14]||(l[14]=e=>o.zoom=e),"use-global-leaflet":!1,center:o.location},{default:n(()=>[(r(!0),u(g,null,_(o.tileProviders,e=>(r(),b(y,{key:e.name,name:e.name,visible:e.visible,url:e.url,attribution:e.attribution,"layer-type":"base"},null,8,["name","visible","url","attribution"]))),128)),s(j,{"lat-lng":o.location,onMoveend:p.onMarkerMoveEnd,ref:"marker",draggable:!0},null,8,["lat-lng","onMoveend"])]),_:1},8,["zoom","center"])])]),t("div",ve,[s(f,{dense:"",modelValue:o.nuevoEjecutivo.zona_id,"onUpdate:modelValue":l[15]||(l[15]=e=>o.nuevoEjecutivo.zona_id=e),options:o.zonas,"option-label":"nombre_zona","option-value":"id",outlined:"",rules:[e=>!!e||"Este campo es requerido"],label:"Seleccionar Zona"},null,8,["modelValue","options","rules"])]),t("div",he,[s(d,{dense:"",modelValue:o.ejecutivo.cumple,"onUpdate:modelValue":l[16]||(l[16]=e=>o.ejecutivo.cumple=e),outlined:"",label:"Cumplea\xF1os",type:"date"},null,8,["modelValue"])]),t("div",_e,[s(f,{dense:"",modelValue:o.ejecutivo.estado,"onUpdate:modelValue":l[17]||(l[17]=e=>o.ejecutivo.estado=e),options:["ACTIVO","INACTIVO"],outlined:"",rules:[e=>!!e||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),s(E,{align:"right"},{default:n(()=>[s(m,{label:"Cancelar",color:"negative",onClick:l[18]||(l[18]=e=>o.dialog=!1),loading:o.loading},null,8,["loading"]),s(m,{label:"Guardar",color:"primary",type:"submit",loading:o.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"]))]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var qe=A(D,[["render",je],["__scopeId","data-v-7472160e"]]);export{qe as default};
