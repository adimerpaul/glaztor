import{Q as w,a as b}from"./QSelect.fd622edb.js";import{R as c,S as _,T as t,U as i,aA as u,W as l,$ as v,a0 as C,a1 as x,aC as f,V as r,M as k,Z as d,bf as Q,aB as h,a_ as S,aD as V,Y as y,bd as E,be as N}from"./index.472f576f.js";import{Q as q}from"./QMarkupTable.c2413f0d.js";import{Q as I}from"./QPageSticky.e99acd71.js";import{Q as D}from"./QSpace.20423384.js";import{Q as A}from"./QForm.404e5d76.js";import{Q as B}from"./QPage.76eee91d.js";import{C as G}from"./ClosePopup.69a8fe43.js";import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.6802d7a4.js";const U={name:"newservicios",data(){return{newservicios:[],newservicio:{},dialog:!1,loading:!1}},mounted(){this.getNewServicios()},methods:{modificar(s){this.newservicio={...s},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.newservicio.id?this.$axios.put(`newservicios/${this.newservicio.id}`,this.newservicio):this.$axios.post("newservicios",this.newservicio)).then(o=>{if(this.newservicio.id){const m=this.newservicios.findIndex(p=>p.id===this.newservicio.id);this.newservicios.splice(m,1,o.data)}else this.newservicios.push(o.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}).catch(()=>{this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1})},eliminar(s){this.$q.dialog({title:"Eliminar servicio",message:"\xBFEst\xE1s seguro de eliminar este servicio?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.$axios.delete(`newservicios/${s}`).then(()=>{this.newservicios=this.newservicios.filter(o=>o.id!==s),this.$q.notify({color:"positive",message:"Eliminado con \xE9xito"})})})},dialogClick(){this.dialog=!0,this.newservicio={nombre:"",descripcion:"",estado:"Activo"}},getNewServicios(){this.$axios.get("newservicios").then(s=>{this.newservicios=s.data})}},computed:{esMovil(){return this.$q.screen.lt.md}}},$=s=>(E("data-v-1c01851c"),s=s(),N(),s),P=$(()=>l("thead",null,[l("tr",null,[l("th",null,"ID"),l("th",null,"Nombre"),l("th",null,"Descripci\xF3n"),l("th",null,"Estado"),l("th",null,"Acciones")])],-1)),T={class:"row items-center"},z={class:"text-h6"};function F(s,o,m,p,a,n){return c(),_(B,{class:"bg-grey-2 q-pa-lg"},{default:t(()=>[i(f,null,{default:t(()=>[i(u,{class:"q-pa-sm"},{default:t(()=>[i(q,{dense:"","wrap-cells":""},{default:t(()=>[P,l("tbody",null,[(c(!0),v(x,null,C(a.newservicios,(e,O)=>(c(),v("tr",{key:e.id},[l("td",null,d(e.id),1),l("td",null,d(e.nombre),1),l("td",null,d(e.descripcion),1),l("td",null,[i(b,{color:e.estado==="Activo"?"green":"red","text-color":"white",dense:""},{default:t(()=>[y(d(e.estado),1)]),_:2},1032,["color"])]),l("td",null,[i(r,{flat:"",dense:"",icon:"edit",color:"blue",label:"Editar",onClick:g=>n.modificar(e)},null,8,["onClick"]),i(r,{flat:"",dense:"",icon:"delete",color:"negative",label:"Eliminar",onClick:g=>n.eliminar(e.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),i(I,{position:"bottom-right",offset:[18,18]},{default:t(()=>[i(r,{fab:"",color:"primary",icon:"add",onClick:n.dialogClick},null,8,["onClick"])]),_:1}),i(V,{modelValue:a.dialog,"onUpdate:modelValue":o[4]||(o[4]=e=>a.dialog=e),maximized:n.esMovil},{default:t(()=>[i(f,{style:{width:"450px","max-width":"100vw"}},{default:t(()=>[i(u,{class:"bg-primary text-white"},{default:t(()=>[l("div",T,[k(i(r,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[G]]),i(D),l("div",z,d(a.newservicio.id?"Editar":"Nuevo")+" Servicio",1)])]),_:1}),i(u,null,{default:t(()=>[i(A,{onSubmit:Q(n.confirmarGuardar,["prevent"])},{default:t(()=>[i(h,{dense:"",modelValue:a.newservicio.nombre,"onUpdate:modelValue":o[0]||(o[0]=e=>a.newservicio.nombre=e),outlined:"",label:"Nombre del Servicio",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),i(h,{dense:"",modelValue:a.newservicio.descripcion,"onUpdate:modelValue":o[1]||(o[1]=e=>a.newservicio.descripcion=e),outlined:"",label:"Descripci\xF3n"},null,8,["modelValue"]),i(w,{dense:"",modelValue:a.newservicio.estado,"onUpdate:modelValue":o[2]||(o[2]=e=>a.newservicio.estado=e),options:["Activo","Inactivo"],outlined:"",label:"Estado",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),i(S,{align:"right"},{default:t(()=>[i(r,{flat:"",label:"Cancelar",color:"negative",onClick:o[3]||(o[3]=e=>a.dialog=!1)}),i(r,{label:"Guardar",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]),_:1})}var ee=M(U,[["render",F],["__scopeId","data-v-1c01851c"]]);export{ee as default};
