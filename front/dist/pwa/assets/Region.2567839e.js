import{O as u,Y as c,R as o,Q as n,ax as v,_ as h,ay as f,az as m,T as t,Z as x,S as r,J as y,W as g,bd as C,aA as _,aC as k,b0 as q,b1 as Q}from"./index.998bd65e.js";import{Q as E}from"./QPage.369d1f0c.js";import{Q as R}from"./QPageSticky.21b5b08b.js";import{Q as V,a as w}from"./QForm.b755ba32.js";import{Q as I}from"./QSelect.16d28045.js";import{C as S}from"./ClosePopup.41fa9c67.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";const N={name:"regions",data(){return{regions:[],region:{},dialog:!1,loading:!1}},mounted(){this.getRegions()},methods:{modificar(s){this.region={...s},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.region.id?this.$axios.put(`regions/${this.region.id}`,this.region):this.$axios.post("regions",this.region)).then(e=>{if(e.status===200||e.status===201){if(this.region.id){const a=this.regions.findIndex(p=>p.id===this.region.id);a!==-1&&this.$set(this.regions,a,e.data)}else this.regions.push(e.data);this.dialog=!1,this.$q.notify({color:"positive",message:"Regi\xF3n guardada exitosamente.",icon:"check_circle"})}}).catch(e=>{console.error("Error al guardar la regi\xF3n:",e),this.$q.notify({color:"positive",message:"Regi\xF3n guardada exitosamente.",icon:"check_circle"})}).finally(()=>{this.loading=!1,this.dialog=!1,this.getRegions()})},eliminar(s){this.$q.dialog({title:"Eliminar Regi\xF3n",message:"\xBFEst\xE1s seguro de que quieres eliminar esta regi\xF3n?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.loading=!0,this.$axios.delete(`regions/${s}`).then(e=>{this.regions=this.regions.filter(a=>a.id!==s),this.$q.notify({color:"positive",message:"Regi\xF3n eliminada exitosamente.",icon:"check_circle"})}).catch(e=>{console.error("Error al eliminar la regi\xF3n:",e),this.$q.notify({color:"negative",message:"Error al eliminar la regi\xF3n. Intenta nuevamente.",icon:"report_problem"})}).finally(()=>{this.loading=!1})})},dialogClick(){this.dialog=!0,this.region={nombre_region:"",descripcion_region:"",estado:"Activo"}},getRegions(){this.$axios.get("regions").then(s=>{this.regions=s.data}).catch(s=>{console.error("Error al obtener las regiones:",s),this.$q.notify({color:"negative",message:"Error al obtener las regiones. Intenta nuevamente.",icon:"report_problem"})})}},computed:{esMovil(){return this.$q.screen.lt.md}}},U=s=>(q("data-v-1d85824e"),s=s(),Q(),s),A={border:"1",style:{width:"100%"},class:"styled-table"},B=U(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Nombre Regi\xF3n"),t("th",null,"Descripci\xF3n"),t("th",null,"Estado"),t("th",null,"Acciones")])],-1)),G={class:"text-h6"},M={class:"row"},z={class:"col-12"},O={class:"col-12"},P={class:"col-12"};function F(s,e,a,p,l,d){return u(),c(h,null,[o(E,{class:"bg-grey-3 q-pa-xs"},{default:n(()=>[o(f,null,{default:n(()=>[o(m,{class:"q-pa-xs"},{default:n(()=>[t("table",A,[B,t("tbody",null,[(u(!0),c(h,null,x(l.regions,(i,$)=>(u(),c("tr",{key:i.id},[t("td",null,g(i.id),1),t("td",null,g(i.nombre_region),1),t("td",null,g(i.descripcion_region),1),t("td",null,g(i.estado),1),t("td",null,[o(r,{onClick:b=>d.eliminar(i.id),color:"negative",size:"xs",icon:"delete"},null,8,["onClick"]),o(r,{onClick:b=>d.modificar(i),class:"glossy",rounded:"",color:"deep-orange",label:"Modificar"},null,8,["onClick"])])]))),128))])])]),_:1})]),_:1})]),_:1}),o(R,{position:"bottom-right",class:"text-bold",offset:[18,18]},{default:n(()=>[o(r,{fab:"",icon:"add",color:"primary",onClick:d.dialogClick},null,8,["onClick"])]),_:1}),o(v,{modelValue:l.dialog,"onUpdate:modelValue":e[6]||(e[6]=i=>l.dialog=i),position:d.esMovil?void 0:"right",maximized:!0,"transition-show":"slide-left","transition-hide":"slide-right"},{default:n(()=>[o(f,{style:{width:"450px","max-width":"100vw"}},{default:n(()=>[o(m,{class:"row items-center q-px-md bg-primary text-white q-px-none"},{default:n(()=>[y(o(r,{flat:"",round:"",dense:"",icon:"fa-solid fa-arrow-left"},null,512),[[S]]),o(V),t("div",G,g(l.region.id?"Editar":"Nuevo")+" Regi\xF3n",1)]),_:1}),o(m,null,{default:n(()=>[o(w,{onSubmit:C(d.confirmarGuardar,["prevent"])},{default:n(()=>[t("div",M,[t("div",z,[o(_,{dense:"",modelValue:l.region.nombre_region,"onUpdate:modelValue":e[0]||(e[0]=i=>l.region.nombre_region=i),outlined:"",label:"Nombre Regi\xF3n",rules:[i=>!!i||"Este campo es requerido"],onInput:e[1]||(e[1]=i=>l.region.nombre_region=l.region.nombre_region.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"])]),t("div",O,[o(_,{dense:"",modelValue:l.region.descripcion_region,"onUpdate:modelValue":e[2]||(e[2]=i=>l.region.descripcion_region=i),outlined:"",label:"Descripci\xF3n Regi\xF3n",onInput:e[3]||(e[3]=i=>l.region.descripcion_region=l.region.descripcion_region.toUpperCase()),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),t("div",P,[o(I,{dense:"",modelValue:l.region.estado,"onUpdate:modelValue":e[4]||(e[4]=i=>l.region.estado=i),options:["Activo","Inactivo"],outlined:"",rules:[i=>!!i||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"])]),o(k,{align:"right"},{default:n(()=>[o(r,{label:"Cancelar",color:"negative",onClick:e[5]||(e[5]=i=>l.dialog=!1),loading:l.loading},null,8,["loading"]),o(r,{label:"Guardar",color:"primary",type:"submit",loading:l.loading},null,8,["loading"])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","position"])],64)}var H=D(N,[["render",F],["__scopeId","data-v-1d85824e"]]);export{H as default};
