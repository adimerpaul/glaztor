import{Q as w,a as b}from"./QSelect.d21464ce.js";import{$ as c,a0 as _,a1 as t,a2 as i,aG as u,a4 as l,a7 as v,a8 as C,a9 as x,aI as h,a3 as r,C as k,a5 as d,bk as Q,aH as f,b4 as y,aJ as S,a6 as V,bi as E,bj as N}from"./index.9c72f88d.js";import{Q as q}from"./QMarkupTable.cfe36cec.js";import{Q as I}from"./QPageSticky.7a385ea6.js";import{Q as D}from"./QSpace.41e1f98e.js";import{Q as G}from"./QForm.a9dcb4d2.js";import{Q as A}from"./QPage.215302fc.js";import{C as B}from"./ClosePopup.49e3c41f.js";import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.89ba0050.js";const U={name:"newservicios",data(){return{newservicios:[],newservicio:{},dialog:!1,loading:!1}},mounted(){this.getNewServicios()},methods:{modificar(s){this.newservicio={...s},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.newservicio.id?this.$axios.put(`newservicios/${this.newservicio.id}`,this.newservicio):this.$axios.post("newservicios",this.newservicio)).then(o=>{if(this.newservicio.id){const m=this.newservicios.findIndex(p=>p.id===this.newservicio.id);this.newservicios.splice(m,1,o.data)}else this.newservicios.push(o.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}).catch(()=>{this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1})},eliminar(s){this.$q.dialog({title:"Eliminar servicio",message:"\xBFEst\xE1s seguro de eliminar este servicio?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.$axios.delete(`newservicios/${s}`).then(()=>{this.newservicios=this.newservicios.filter(o=>o.id!==s),this.$q.notify({color:"positive",message:"Eliminado con \xE9xito"})})})},dialogClick(){this.dialog=!0,this.newservicio={nombre:"",descripcion:"",estado:"Activo"}},getNewServicios(){this.$axios.get("newservicios").then(s=>{this.newservicios=s.data})}},computed:{esMovil(){return this.$q.screen.lt.md}}},$=s=>(E("data-v-1c01851c"),s=s(),N(),s),P=$(()=>l("thead",null,[l("tr",null,[l("th",null,"ID"),l("th",null,"Nombre"),l("th",null,"Descripci\xF3n"),l("th",null,"Estado"),l("th",null,"Acciones")])],-1)),z={class:"row items-center"},F={class:"text-h6"};function O(s,o,m,p,a,n){return c(),_(A,{class:"bg-grey-2 q-pa-lg"},{default:t(()=>[i(h,null,{default:t(()=>[i(u,{class:"q-pa-sm"},{default:t(()=>[i(q,{dense:"","wrap-cells":""},{default:t(()=>[P,l("tbody",null,[(c(!0),v(x,null,C(a.newservicios,(e,T)=>(c(),v("tr",{key:e.id},[l("td",null,d(e.id),1),l("td",null,d(e.nombre),1),l("td",null,d(e.descripcion),1),l("td",null,[i(b,{color:e.estado==="Activo"?"green":"red","text-color":"white",dense:""},{default:t(()=>[V(d(e.estado),1)]),_:2},1032,["color"])]),l("td",null,[i(r,{flat:"",dense:"",icon:"edit",color:"blue",label:"Editar",onClick:g=>n.modificar(e)},null,8,["onClick"]),i(r,{flat:"",dense:"",icon:"delete",color:"negative",label:"Eliminar",onClick:g=>n.eliminar(e.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),i(I,{position:"bottom-right",offset:[18,18]},{default:t(()=>[i(r,{fab:"",color:"primary",icon:"add",onClick:n.dialogClick},null,8,["onClick"])]),_:1}),i(S,{modelValue:a.dialog,"onUpdate:modelValue":o[4]||(o[4]=e=>a.dialog=e),maximized:n.esMovil},{default:t(()=>[i(h,{style:{width:"450px","max-width":"100vw"}},{default:t(()=>[i(u,{class:"bg-primary text-white"},{default:t(()=>[l("div",z,[k(i(r,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[B]]),i(D),l("div",F,d(a.newservicio.id?"Editar":"Nuevo")+" Servicio",1)])]),_:1}),i(u,null,{default:t(()=>[i(G,{onSubmit:Q(n.confirmarGuardar,["prevent"])},{default:t(()=>[i(f,{dense:"",modelValue:a.newservicio.nombre,"onUpdate:modelValue":o[0]||(o[0]=e=>a.newservicio.nombre=e),outlined:"",label:"Nombre del Servicio",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),i(f,{dense:"",modelValue:a.newservicio.descripcion,"onUpdate:modelValue":o[1]||(o[1]=e=>a.newservicio.descripcion=e),outlined:"",label:"Descripci\xF3n"},null,8,["modelValue"]),i(w,{dense:"",modelValue:a.newservicio.estado,"onUpdate:modelValue":o[2]||(o[2]=e=>a.newservicio.estado=e),options:["Activo","Inactivo"],outlined:"",label:"Estado",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),i(y,{align:"right"},{default:t(()=>[i(r,{flat:"",label:"Cancelar",color:"negative",onClick:o[3]||(o[3]=e=>a.dialog=!1)}),i(r,{label:"Guardar",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]),_:1})}var ee=M(U,[["render",O],["__scopeId","data-v-1c01851c"]]);export{ee as default};
