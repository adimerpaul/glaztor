import{Q as b,a as C}from"./QSelect.b493f8f7.js";import{R as c,S as v,T as i,U as o,aA as u,W as l,$ as p,a0 as x,a1 as k,aC as f,V as s,M as Q,Z as d,bf as y,aB as h,a_ as V,aD as w,Y as E,bd as S,be as q}from"./index.e95100ec.js";import{Q as I}from"./QMarkupTable.92a4f163.js";import{Q as D}from"./QPageSticky.6289ab09.js";import{Q as N}from"./QSpace.5ba5662b.js";import{Q as U}from"./QForm.c582a3d7.js";import{Q as A}from"./QPage.a2881a74.js";import{C as B}from"./ClosePopup.c6d1387a.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.39f6ce55.js";const M={name:"cargos",data(){return{cargos:[],cargo:{},dialog:!1,loading:!1}},mounted(){this.getCargos()},methods:{modificar(t){this.cargo={...t},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.cargo.id?this.$axios.put(`cargos/${this.cargo.id}`,this.cargo):this.$axios.post("cargos",this.cargo)).then(a=>{if(this.cargo.id){const g=this.cargos.findIndex(m=>m.id===this.cargo.id);this.cargos.splice(g,1,a.data)}else this.cargos.push(a.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}).catch(()=>{this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1})},eliminar(t){this.$q.dialog({title:"Eliminar Cargo",message:"\xBFEst\xE1s seguro de eliminar este cargo?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.$axios.delete(`cargos/${t}`).then(()=>{this.cargos=this.cargos.filter(a=>a.id!==t),this.$q.notify({color:"positive",message:"Eliminado con \xE9xito"})})})},dialogClick(){this.dialog=!0,this.cargo={nombre_cargo:"",descripcion_cargo:"",estado:"Activo"}},getCargos(){this.$axios.get("cargos").then(t=>{this.cargos=t.data})}},computed:{esMovil(){return this.$q.screen.lt.md}}},P=t=>(S("data-v-13e796b1"),t=t(),q(),t),T=P(()=>l("thead",null,[l("tr",null,[l("th",null,"ID"),l("th",null,"Nombre Cargo"),l("th",null,"Descripci\xF3n"),l("th",null,"Estado"),l("th",null,"Acciones")])],-1)),z={class:"row items-center"},F={class:"text-h6"};function O(t,a,g,m,r,n){return c(),v(A,{class:"bg-grey-2 q-pa-lg"},{default:i(()=>[o(f,null,{default:i(()=>[o(u,{class:"q-pa-sm"},{default:i(()=>[o(I,{dense:"","wrap-cells":""},{default:i(()=>[T,l("tbody",null,[(c(!0),p(k,null,x(r.cargos,(e,$)=>(c(),p("tr",{key:e.id},[l("td",null,d(e.id),1),l("td",null,d(e.nombre_cargo),1),l("td",null,d(e.descripcion_cargo),1),l("td",null,[o(C,{color:e.estado==="Activo"?"green":"red","text-color":"white",dense:""},{default:i(()=>[E(d(e.estado),1)]),_:2},1032,["color"])]),l("td",null,[o(s,{flat:"",dense:"",icon:"edit",color:"blue",label:"Editar",onClick:_=>n.modificar(e)},null,8,["onClick"]),o(s,{flat:"",dense:"",icon:"delete",color:"negative",label:"Eliminar",onClick:_=>n.eliminar(e.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),o(D,{position:"bottom-right",offset:[18,18]},{default:i(()=>[o(s,{fab:"",color:"primary",icon:"add",onClick:n.dialogClick},null,8,["onClick"])]),_:1}),o(w,{modelValue:r.dialog,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialog=e),maximized:n.esMovil},{default:i(()=>[o(f,{style:{width:"450px","max-width":"100vw"}},{default:i(()=>[o(u,{class:"bg-primary text-white"},{default:i(()=>[l("div",z,[Q(o(s,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[B]]),o(N),l("div",F,d(r.cargo.id?"Editar":"Nuevo")+" Cargo",1)])]),_:1}),o(u,null,{default:i(()=>[o(U,{onSubmit:y(n.confirmarGuardar,["prevent"])},{default:i(()=>[o(h,{dense:"",modelValue:r.cargo.nombre_cargo,"onUpdate:modelValue":a[0]||(a[0]=e=>r.cargo.nombre_cargo=e),outlined:"",label:"Nombre del Cargo",style:{"text-transform":"uppercase"},onInput:a[1]||(a[1]=e=>r.cargo.nombre_cargo=r.cargo.nombre_cargo.toUpperCase()),rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),o(h,{dense:"",modelValue:r.cargo.descripcion_cargo,"onUpdate:modelValue":a[2]||(a[2]=e=>r.cargo.descripcion_cargo=e),outlined:"",label:"Descripci\xF3n",style:{"text-transform":"uppercase"},onInput:a[3]||(a[3]=e=>r.cargo.descripcion_cargo=r.cargo.descripcion_cargo.toUpperCase())},null,8,["modelValue"]),o(b,{dense:"",modelValue:r.cargo.estado,"onUpdate:modelValue":a[4]||(a[4]=e=>r.cargo.estado=e),options:["Activo","Inactivo"],outlined:"",label:"Estado",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),o(V,{align:"right"},{default:i(()=>[o(s,{flat:"",label:"Cancelar",color:"negative",onClick:a[5]||(a[5]=e=>r.dialog=!1)}),o(s,{label:"Guardar",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]),_:1})}var ee=G(M,[["render",O],["__scopeId","data-v-13e796b1"]]);export{ee as default};
