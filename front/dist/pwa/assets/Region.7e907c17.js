import{T as g,U as u,V as l,W as e,X as t,aE as c,$ as m,M as f,_,aF as V,aD as b,Y as h,Z as E,aG as y}from"./index.8e5efdfb.js";import{Q,a as d,d as v}from"./format.7d90d4c2.js";import{Q as q}from"./QList.75259ae5.js";import{Q as w}from"./QBtnDropdown.5b46475c.js";import{Q as x}from"./QTd.47060a52.js";import{a as R,Q as I}from"./QSelect.7f7f9668.js";import{Q as N}from"./QTable.9ece2fc3.js";import{Q as S}from"./QSpace.1f3d3d67.js";import{Q as D}from"./QForm.4421addc.js";import{Q as B}from"./QPage.8f9149b4.js";import{C}from"./ClosePopup.3be4487d.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnGroup.7ea5ef23.js";import"./QMarkupTable.f4b57dd0.js";const U={name:"regions",data(){return{regions:[],region:{},dialog:!1,loading:!1,filter:"",columns:[{name:"name",label:"Nombre Regi\xF3n",align:"left",field:"nombre_region"},{name:"description",label:"Descripci\xF3n",align:"left",field:"descripcion_region"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"actions",label:"Acciones",align:"center"}]}},mounted(){this.getRegions()},methods:{modificar(a){this.region={...a},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.region.id?this.$axios.put(`regions/${this.region.id}`,this.region):this.$axios.post("regions",this.region)).then(o=>{if(o.status===200||o.status===201){if(this.region.id){const n=this.regions.findIndex(p=>p.id===this.region.id);n!==-1&&this.regions.splice(n,1,o.data)}else this.regions.push(o.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}}).catch(o=>{console.error("Error al guardar la regi\xF3n:",o),this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1,this.getRegions()})},eliminar(a){this.$q.dialog({title:"Eliminar Regi\xF3n",message:"\xBFEst\xE1s seguro de que quieres eliminar esta regi\xF3n?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.loading=!0,this.$axios.delete(`regions/${a}`).then(o=>{this.regions=this.regions.filter(n=>n.id!==a),this.$q.notify({color:"positive",message:"Regi\xF3n eliminada exitosamente.",icon:"check_circle"})}).catch(o=>{console.error("Error al eliminar la regi\xF3n:",o),this.$q.notify({color:"negative",message:"Error al eliminar la regi\xF3n.",icon:"error"})}).finally(()=>{this.loading=!1})})},dialogClick(){this.dialog=!0,this.region={nombre_region:"",descripcion_region:"",estado:"Activo"}},getRegions(){this.$axios.get("regions").then(a=>{this.regions=a.data}).catch(a=>{console.error("Error al obtener las regiones:",a),this.$q.notify({color:"negative",message:"Error al obtener las regiones.",icon:"error"})})}}},A={class:"text-right"};function T(a,o,n,p,r,s){return g(),u(B,{class:"q-pa-md"},{default:l(()=>[e(N,{rows:r.regions,columns:r.columns,filter:r.filter,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"Regiones"},{"top-right":l(()=>[e(t,{color:"primary",label:"Nuevo",onClick:s.dialogClick,outline:"","no-caps":"",icon:"add_circle_outline",loading:r.loading},null,8,["onClick","loading"]),e(c,{modelValue:r.filter,"onUpdate:modelValue":o[0]||(o[0]=i=>r.filter=i),label:"Buscar",dense:"",outlined:""},{append:l(()=>[e(m,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":l(i=>[e(x,{props:i},{default:l(()=>[e(w,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:l(()=>[e(q,null,{default:l(()=>[f((g(),u(Q,{clickable:"",onClick:k=>s.modificar(i.row)},{default:l(()=>[e(d,{avatar:""},{default:l(()=>[e(m,{name:"edit"})]),_:1}),e(d,null,{default:l(()=>[e(v,null,{default:l(()=>[_("Editar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[C]]),f((g(),u(Q,{clickable:"",onClick:k=>s.eliminar(i.row.id)},{default:l(()=>[e(d,{avatar:""},{default:l(()=>[e(m,{name:"delete"})]),_:1}),e(d,null,{default:l(()=>[e(v,null,{default:l(()=>[_("Eliminar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[C]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-estado":l(i=>[e(x,{props:i},{default:l(()=>[e(R,{label:i.row.estado,color:i.row.estado==="Activo"?"green":"red","text-color":"white",dense:"",size:"14px"},null,8,["label","color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),e(y,{modelValue:r.dialog,"onUpdate:modelValue":o[6]||(o[6]=i=>r.dialog=i),persistent:""},{default:l(()=>[e(V,null,{default:l(()=>[e(b,{class:"q-pb-none row items-center"},{default:l(()=>[h("div",null,E(r.region.id?"Editar":"Nuevo")+" Regi\xF3n",1),e(S),e(t,{icon:"close",flat:"",round:"",dense:"",onClick:o[1]||(o[1]=i=>r.dialog=!1)})]),_:1}),e(b,null,{default:l(()=>[e(D,{onSubmit:s.confirmarGuardar},{default:l(()=>[e(c,{modelValue:r.region.nombre_region,"onUpdate:modelValue":o[2]||(o[2]=i=>r.region.nombre_region=i),label:"Nombre Regi\xF3n",dense:"",outlined:"",rules:[i=>!!i||"Este campo es requerido"],style:{"text-transform":"uppercase"}},null,8,["modelValue","rules"]),e(c,{modelValue:r.region.descripcion_region,"onUpdate:modelValue":o[3]||(o[3]=i=>r.region.descripcion_region=i),label:"Descripci\xF3n Regi\xF3n",dense:"",outlined:"",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),e(I,{modelValue:r.region.estado,"onUpdate:modelValue":o[4]||(o[4]=i=>r.region.estado=i),options:["Activo","Inactivo"],outlined:"",dense:"",rules:[i=>!!i||"Este campo es requerido"],label:"Estado"},null,8,["modelValue","rules"]),h("div",A,[e(t,{color:"negative",label:"Cancelar",onClick:o[5]||(o[5]=i=>r.dialog=!1),"no-caps":"",loading:r.loading},null,8,["loading"]),e(t,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:r.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var $=G(U,[["render",T],["__scopeId","data-v-5c779814"]]);export{$ as default};
