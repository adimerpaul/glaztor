import{Q as b,a as C}from"./QSelect.2c61fcd1.js";import{R as c,S as v,T as i,U as o,aA as u,W as r,$ as p,a0 as x,a1 as k,aC as f,V as s,M as Q,Z as d,bf as V,aB as h,a_ as y,aD as w,Y as E,b2 as I,b3 as S}from"./index.14a741ef.js";import{Q as q}from"./QMarkupTable.c9a1407f.js";import{Q as D}from"./QPageSticky.36d36c08.js";import{Q as N,a as U}from"./QForm.52148441.js";import{Q as A}from"./QPage.45f73780.js";import{C as B}from"./ClosePopup.b46939d4.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const M={name:"cargos",data(){return{cargos:[],cargo:{},dialog:!1,loading:!1}},mounted(){this.getCargos()},methods:{modificar(t){this.cargo={...t},this.dialog=!0},confirmarGuardar(){this.$q.dialog({title:"Confirmar Guardado",message:"\xBFEst\xE1s seguro de que quieres guardar los cambios?",ok:{label:"S\xED",color:"primary"},cancel:{label:"No",color:"negative"}}).onOk(()=>{this.submit()})},submit(){this.loading=!0,(this.cargo.id?this.$axios.put(`cargos/${this.cargo.id}`,this.cargo):this.$axios.post("cargos",this.cargo)).then(a=>{if(this.cargo.id){const g=this.cargos.findIndex(m=>m.id===this.cargo.id);this.cargos.splice(g,1,a.data)}else this.cargos.push(a.data);this.dialog=!1,this.$alert.success("Guardado con \xE9xito.")}).catch(()=>{this.$alert.error("Error al guardar.")}).finally(()=>{this.loading=!1})},eliminar(t){this.$q.dialog({title:"Eliminar Cargo",message:"\xBFEst\xE1s seguro de eliminar este cargo?",ok:{label:"Eliminar",color:"negative"},cancel:!0}).onOk(()=>{this.$axios.delete(`cargos/${t}`).then(()=>{this.cargos=this.cargos.filter(a=>a.id!==t),this.$q.notify({color:"positive",message:"Eliminado con \xE9xito."})})})},dialogClick(){this.dialog=!0,this.cargo={nombre_cargo:"",descripcion_cargo:"",estado:"ACTIVO"}},getCargos(){this.$axios.get("cargos").then(t=>{this.cargos=t.data})}},computed:{esMovil(){return this.$q.screen.lt.md}}},T=t=>(I("data-v-530159f2"),t=t(),S(),t),O=T(()=>r("thead",null,[r("tr",null,[r("th",null,"ID"),r("th",null,"Nombre Cargo"),r("th",null,"Descripci\xF3n"),r("th",null,"Estado"),r("th",null,"Acciones")])],-1)),P={class:"row items-center"},z={class:"text-h6"};function F(t,a,g,m,l,n){return c(),v(A,{class:"bg-grey-2 q-pa-lg"},{default:i(()=>[o(f,null,{default:i(()=>[o(u,{class:"q-pa-sm"},{default:i(()=>[o(q,{dense:"","wrap-cells":""},{default:i(()=>[O,r("tbody",null,[(c(!0),p(k,null,x(l.cargos,(e,$)=>(c(),p("tr",{key:e.id},[r("td",null,d(e.id),1),r("td",null,d(e.nombre_cargo),1),r("td",null,d(e.descripcion_cargo),1),r("td",null,[o(C,{color:e.estado==="ACTIVO"?"green":"red","text-color":"white",dense:""},{default:i(()=>[E(d(e.estado),1)]),_:2},1032,["color"])]),r("td",null,[o(s,{flat:"",dense:"",icon:"edit",color:"blue",label:"Editar",onClick:_=>n.modificar(e)},null,8,["onClick"]),o(s,{flat:"",dense:"",icon:"delete",color:"negative",label:"Eliminar",onClick:_=>n.eliminar(e.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),o(D,{position:"bottom-right",offset:[18,18]},{default:i(()=>[o(s,{fab:"",color:"primary",icon:"add",onClick:n.dialogClick},null,8,["onClick"])]),_:1}),o(w,{modelValue:l.dialog,"onUpdate:modelValue":a[6]||(a[6]=e=>l.dialog=e),maximized:n.esMovil},{default:i(()=>[o(f,{style:{width:"450px","max-width":"100vw"}},{default:i(()=>[o(u,{class:"bg-primary text-white"},{default:i(()=>[r("div",P,[Q(o(s,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[B]]),o(N),r("div",z,d(l.cargo.id?"Editar":"Nuevo")+" Cargo",1)])]),_:1}),o(u,null,{default:i(()=>[o(U,{onSubmit:V(n.confirmarGuardar,["prevent"])},{default:i(()=>[o(h,{dense:"",modelValue:l.cargo.nombre_cargo,"onUpdate:modelValue":a[0]||(a[0]=e=>l.cargo.nombre_cargo=e),outlined:"",label:"Nombre del Cargo",style:{"text-transform":"uppercase"},onInput:a[1]||(a[1]=e=>l.cargo.nombre_cargo=l.cargo.nombre_cargo.toUpperCase()),rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),o(h,{dense:"",modelValue:l.cargo.descripcion_cargo,"onUpdate:modelValue":a[2]||(a[2]=e=>l.cargo.descripcion_cargo=e),outlined:"",label:"Descripci\xF3n",style:{"text-transform":"uppercase"},onInput:a[3]||(a[3]=e=>l.cargo.descripcion_cargo=l.cargo.descripcion_cargo.toUpperCase())},null,8,["modelValue"]),o(b,{dense:"",modelValue:l.cargo.estado,"onUpdate:modelValue":a[4]||(a[4]=e=>l.cargo.estado=e),options:["Activo","Inactivo"],outlined:"",label:"Estado",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),o(y,{align:"right"},{default:i(()=>[o(s,{flat:"",label:"Cancelar",color:"negative",onClick:a[5]||(a[5]=e=>l.dialog=!1)}),o(s,{label:"Guardar",color:"primary",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])]),_:1})}var K=G(M,[["render",F],["__scopeId","data-v-530159f2"]]);export{K as default};
